<?php return array (
  'unique_key' => 'category',
  'preserve_keys' => false,
  'update_object' => true,
  'related_objects' => 
  array (
    'Chunks' => 
    array (
      '0e1faaeb31b75a69e2da72c175d38e94' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"msProduct.content","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<h1>[[*pagetitle]]<\\/h1>\\n<div id=\\"msProduct\\" class=\\"row\\">\\n    <div class=\\"col-md-6\\">\\n        [[!msGallery]]\\n    <\\/div>\\n    <div class=\\"col-md-6\\">\\n        <form class=\\"form-horizontal ms2_form\\" method=\\"post\\">\\n            <input type=\\"hidden\\" name=\\"id\\" value=\\"[[*id]]\\"\\/>\\n            <div class=\\"form-group\\">\\n                <label class=\\"col-md-2 control-label\\">[[%ms2_product_article]]:<\\/label>\\n                <div class=\\"col-md-10 form-control-static\\">\\n                    [[+article:default=`-`]]\\n                <\\/div>\\n            <\\/div>\\n            <div class=\\"form-group\\">\\n                <label class=\\"col-md-2 control-label\\">[[%ms2_product_price]]:<\\/label>\\n                <div class=\\"col-md-10 form-control-static\\">\\n                    [[+price]] [[%ms2_frontend_currency]]\\n                    [[+old_price:gt=`0`:then=`\\n                    <span class=\\"old_price\\">[[+old_price]] [[%ms2_frontend_currency]]<\\/span>\\n                    `:else=``]]\\n                <\\/div>\\n            <\\/div>\\n            <div class=\\"form-group form-inline\\">\\n                <label class=\\"col-md-2 control-label\\" for=\\"product_price\\">[[%ms2_cart_count]]:<\\/label>\\n                <div class=\\"col-md-10\\">\\n                    <input type=\\"number\\" name=\\"count\\" id=\\"product_price\\" class=\\"input-sm form-control\\" value=\\"1\\"\\/>\\n                    [[%ms2_frontend_count_unit]]\\n                <\\/div>\\n            <\\/div>\\n            <div class=\\"form-group\\">\\n                <label class=\\"col-md-2 control-label\\">[[%ms2_product_weight]]:<\\/label>\\n                <div class=\\"col-md-10 form-control-static\\">\\n                    [[+weight]] [[%ms2_frontend_weight_unit]]\\n                <\\/div>\\n            <\\/div>\\n            <div class=\\"form-group\\">\\n                <label class=\\"col-md-2 control-label\\">[[%ms2_product_made_in]]:<\\/label>\\n                <div class=\\"col-md-10 form-control-static\\">\\n                    [[+made_in:default=`-`]]\\n                <\\/div>\\n            <\\/div>\\n\\n            [[msOptions?options=`color,size`]]\\n\\n            [[msProductOptions]]\\n\\n            <div class=\\"form-group\\">\\n                <div class=\\"col-md-offset-2 col-md-10\\">\\n                    <button type=\\"submit\\" class=\\"btn btn-default\\" name=\\"ms2_action\\" value=\\"cart\\/add\\">\\n                        <i class=\\"glyphicon glyphicon-barcode\\"><\\/i> [[%ms2_frontend_add_to_cart]]\\n                    <\\/button>\\n                <\\/div>\\n            <\\/div>\\n        <\\/form>\\n\\n    <\\/div>\\n<\\/div>\\n[[*content]]","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/chunks\\/chunk.ms_product_content.tpl","content":"<h1>[[*pagetitle]]<\\/h1>\\n<div id=\\"msProduct\\" class=\\"row\\">\\n    <div class=\\"col-md-6\\">\\n        [[!msGallery]]\\n    <\\/div>\\n    <div class=\\"col-md-6\\">\\n        <form class=\\"form-horizontal ms2_form\\" method=\\"post\\">\\n            <input type=\\"hidden\\" name=\\"id\\" value=\\"[[*id]]\\"\\/>\\n            <div class=\\"form-group\\">\\n                <label class=\\"col-md-2 control-label\\">[[%ms2_product_article]]:<\\/label>\\n                <div class=\\"col-md-10 form-control-static\\">\\n                    [[+article:default=`-`]]\\n                <\\/div>\\n            <\\/div>\\n            <div class=\\"form-group\\">\\n                <label class=\\"col-md-2 control-label\\">[[%ms2_product_price]]:<\\/label>\\n                <div class=\\"col-md-10 form-control-static\\">\\n                    [[+price]] [[%ms2_frontend_currency]]\\n                    [[+old_price:gt=`0`:then=`\\n                    <span class=\\"old_price\\">[[+old_price]] [[%ms2_frontend_currency]]<\\/span>\\n                    `:else=``]]\\n                <\\/div>\\n            <\\/div>\\n            <div class=\\"form-group form-inline\\">\\n                <label class=\\"col-md-2 control-label\\" for=\\"product_price\\">[[%ms2_cart_count]]:<\\/label>\\n                <div class=\\"col-md-10\\">\\n                    <input type=\\"number\\" name=\\"count\\" id=\\"product_price\\" class=\\"input-sm form-control\\" value=\\"1\\"\\/>\\n                    [[%ms2_frontend_count_unit]]\\n                <\\/div>\\n            <\\/div>\\n            <div class=\\"form-group\\">\\n                <label class=\\"col-md-2 control-label\\">[[%ms2_product_weight]]:<\\/label>\\n                <div class=\\"col-md-10 form-control-static\\">\\n                    [[+weight]] [[%ms2_frontend_weight_unit]]\\n                <\\/div>\\n            <\\/div>\\n            <div class=\\"form-group\\">\\n                <label class=\\"col-md-2 control-label\\">[[%ms2_product_made_in]]:<\\/label>\\n                <div class=\\"col-md-10 form-control-static\\">\\n                    [[+made_in:default=`-`]]\\n                <\\/div>\\n            <\\/div>\\n\\n            [[msOptions?options=`color,size`]]\\n\\n            [[msProductOptions]]\\n\\n            <div class=\\"form-group\\">\\n                <div class=\\"col-md-offset-2 col-md-10\\">\\n                    <button type=\\"submit\\" class=\\"btn btn-default\\" name=\\"ms2_action\\" value=\\"cart\\/add\\">\\n                        <i class=\\"glyphicon glyphicon-barcode\\"><\\/i> [[%ms2_frontend_add_to_cart]]\\n                    <\\/button>\\n                <\\/div>\\n            <\\/div>\\n        <\\/form>\\n\\n    <\\/div>\\n<\\/div>\\n[[*content]]"}',
        'guid' => '0e90bef9ec5c2885b4b3aeaec547fa11',
        'native_key' => 0,
        'signature' => '2aa9ca6531337c2d3297ddb6f93389bf',
      ),
      'd48486fb4af5f4ead971f38f650fc615' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.msProducts.row","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<div class=\\"row ms2_product\\">\\n    <div class=\\"col-md-2\\">\\n        {if $thumb?}\\n            <img src=\\"{$thumb}\\" alt=\\"{$pagetitle}\\" title=\\"{$pagetitle}\\"\\/>\\n        {else}\\n            <img src=\\"{\'assets_url\' | option}components\\/minishop2\\/img\\/web\\/ms2_small.png\\"\\n                 srcset=\\"{\'assets_url\' | option}components\\/minishop2\\/img\\/web\\/ms2_small@2x.png 2x\\"\\n                 alt=\\"{$pagetitle}\\" title=\\"{$pagetitle}\\"\\/>\\n        {\\/if}\\n    <\\/div>\\n    <div class=\\"col-md-10\\">\\n        <form method=\\"post\\" class=\\"ms2_form\\">\\n            <a href=\\"{$id | url}\\">{$pagetitle}<\\/a>\\n            <span class=\\"flags\\">\\n                {if $new?}\\n                    <i class=\\"glyphicon glyphicon-flag\\" title=\\"{\'ms2_frontend_new\' | lexicon}\\"><\\/i>\\n                {\\/if}\\n                {if $popular?}\\n                    <i class=\\"glyphicon glyphicon-star\\" title=\\"{\'ms2_frontend_popular\' | lexicon}\\"><\\/i>\\n                {\\/if}\\n                {if $favorite?}\\n                    <i class=\\"glyphicon glyphicon-bookmark\\" title=\\"{\'ms2_frontend_favorite\' | lexicon}\\"><\\/i>\\n                {\\/if}\\n            <\\/span>\\n            <span class=\\"price\\">\\n                {$price} {\'ms2_frontend_currency\' | lexicon}\\n            <\\/span>\\n            {if $old_price?}\\n                <span class=\\"old_price\\">{$old_price} {\'ms2_frontend_currency\' | lexicon}<\\/span>\\n            {\\/if}\\n            <button class=\\"btn btn-default pull-right\\" type=\\"submit\\" name=\\"ms2_action\\" value=\\"cart\\/add\\">\\n                <i class=\\"glyphicon glyphicon-barcode\\"><\\/i> {\'ms2_frontend_add_to_cart\' | lexicon}\\n            <\\/button>\\n            <input type=\\"hidden\\" name=\\"id\\" value=\\"{$id}\\">\\n            <input type=\\"hidden\\" name=\\"count\\" value=\\"1\\">\\n            <input type=\\"hidden\\" name=\\"options\\" value=\\"[]\\">\\n        <\\/form>\\n        {if $introtext}\\n            <p>\\n                <small>{$introtext}<\\/small>\\n            <\\/p>\\n        {\\/if}\\n    <\\/div>\\n<\\/div>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/chunks\\/chunk.ms_products_row.tpl","content":"<div class=\\"row ms2_product\\">\\n    <div class=\\"col-md-2\\">\\n        {if $thumb?}\\n            <img src=\\"{$thumb}\\" alt=\\"{$pagetitle}\\" title=\\"{$pagetitle}\\"\\/>\\n        {else}\\n            <img src=\\"{\'assets_url\' | option}components\\/minishop2\\/img\\/web\\/ms2_small.png\\"\\n                 srcset=\\"{\'assets_url\' | option}components\\/minishop2\\/img\\/web\\/ms2_small@2x.png 2x\\"\\n                 alt=\\"{$pagetitle}\\" title=\\"{$pagetitle}\\"\\/>\\n        {\\/if}\\n    <\\/div>\\n    <div class=\\"col-md-10\\">\\n        <form method=\\"post\\" class=\\"ms2_form\\">\\n            <a href=\\"{$id | url}\\">{$pagetitle}<\\/a>\\n            <span class=\\"flags\\">\\n                {if $new?}\\n                    <i class=\\"glyphicon glyphicon-flag\\" title=\\"{\'ms2_frontend_new\' | lexicon}\\"><\\/i>\\n                {\\/if}\\n                {if $popular?}\\n                    <i class=\\"glyphicon glyphicon-star\\" title=\\"{\'ms2_frontend_popular\' | lexicon}\\"><\\/i>\\n                {\\/if}\\n                {if $favorite?}\\n                    <i class=\\"glyphicon glyphicon-bookmark\\" title=\\"{\'ms2_frontend_favorite\' | lexicon}\\"><\\/i>\\n                {\\/if}\\n            <\\/span>\\n            <span class=\\"price\\">\\n                {$price} {\'ms2_frontend_currency\' | lexicon}\\n            <\\/span>\\n            {if $old_price?}\\n                <span class=\\"old_price\\">{$old_price} {\'ms2_frontend_currency\' | lexicon}<\\/span>\\n            {\\/if}\\n            <button class=\\"btn btn-default pull-right\\" type=\\"submit\\" name=\\"ms2_action\\" value=\\"cart\\/add\\">\\n                <i class=\\"glyphicon glyphicon-barcode\\"><\\/i> {\'ms2_frontend_add_to_cart\' | lexicon}\\n            <\\/button>\\n            <input type=\\"hidden\\" name=\\"id\\" value=\\"{$id}\\">\\n            <input type=\\"hidden\\" name=\\"count\\" value=\\"1\\">\\n            <input type=\\"hidden\\" name=\\"options\\" value=\\"[]\\">\\n        <\\/form>\\n        {if $introtext}\\n            <p>\\n                <small>{$introtext}<\\/small>\\n            <\\/p>\\n        {\\/if}\\n    <\\/div>\\n<\\/div>"}',
        'guid' => 'c08d298db93567ad2d4faa8b80d3919e',
        'native_key' => 0,
        'signature' => 'de5d7faf847b867de219fdeeccc53fd4',
      ),
      '4746d0a650885e1309f5ae17a091f1c9' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.msCart","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<div id=\\"msCart\\">\\n    {if !count($products)}\\n        {\'ms2_cart_is_empty\' | lexicon}\\n    {else}\\n        <div class=\\"table-responsive\\">\\n            <table class=\\"table table-striped\\">\\n                <tr class=\\"header\\">\\n                    <th class=\\"image\\">&nbsp;<\\/th>\\n                    <th class=\\"title\\">{\'ms2_cart_title\' | lexicon}<\\/th>\\n                    <th class=\\"count\\">{\'ms2_cart_count\' | lexicon}<\\/th>\\n                    <th class=\\"weight\\">{\'ms2_cart_weight\' | lexicon}<\\/th>\\n                    <th class=\\"price\\">{\'ms2_cart_price\' | lexicon}<\\/th>\\n                    <th class=\\"remove\\">{\'ms2_cart_remove\' | lexicon}<\\/th>\\n                <\\/tr>\\n\\n                {foreach $products as $product}\\n                    <tr id=\\"{$product.key}\\">\\n                        <td class=\\"image\\">\\n                            {if $product.thumb?}\\n                                <img src=\\"{$product.thumb}\\" alt=\\"{$product.pagetitle}\\" title=\\"{$product.pagetitle}\\"\\/>\\n                            {else}\\n                                <img src=\\"{\'assets_url\' | option}components\\/minishop2\\/img\\/web\\/ms2_small.png\\"\\n                                     srcset=\\"{\'assets_url\' | option}components\\/minishop2\\/img\\/web\\/ms2_small@2x.png 2x\\"\\n                                     alt=\\"{$product.pagetitle}\\" title=\\"{$product.pagetitle}\\"\\/>\\n                            {\\/if}\\n                        <\\/td>\\n                        <td class=\\"title\\">\\n                            {if $product.id?}\\n                                <a href=\\"{$product.id | url}\\">{$product.pagetitle}<\\/a>\\n                            {else}\\n                                {$product.name}\\n                            {\\/if}\\n                            {if $product.options?}\\n                                <div class=\\"small\\">\\n                                    {$product.options | join : \'; \'}\\n                                <\\/div>\\n                            {\\/if}\\n                        <\\/td>\\n                        <td class=\\"count\\">\\n                            <form method=\\"post\\" class=\\"ms2_form form-inline\\" role=\\"form\\">\\n                                <input type=\\"hidden\\" name=\\"key\\" value=\\"{$product.key}\\"\\/>\\n                                <div class=\\"form-group\\">\\n                                    <input type=\\"number\\" name=\\"count\\" value=\\"{$product.count}\\"\\n                                           class=\\"input-sm form-control\\"\\/>\\n                                    <span class=\\"hidden-xs\\">{\'ms2_frontend_count_unit\' | lexicon}<\\/span>\\n                                    <button class=\\"btn btn-default\\" type=\\"submit\\" name=\\"ms2_action\\" value=\\"cart\\/change\\">\\n                                        <i class=\\"glyphicon glyphicon-refresh\\"><\\/i>\\n                                    <\\/button>\\n                                <\\/div>\\n                            <\\/form>\\n                        <\\/td>\\n                        <td class=\\"weight\\">\\n                            <span>{$product.weight}<\\/span> {\'ms2_frontend_weight_unit\' | lexicon}\\n                        <\\/td>\\n                        <td class=\\"price\\">\\n                            <span>{$product.price}<\\/span> {\'ms2_frontend_currency\' | lexicon}\\n                            {if $product.old_price?}\\n                            <span class=\\"old_price\\">{$product.old_price} {\'ms2_frontend_currency\' | lexicon}\\n                                {\\/if}\\n                        <\\/td>\\n                        <td class=\\"remove\\">\\n                            <form method=\\"post\\" class=\\"ms2_form\\">\\n                                <input type=\\"hidden\\" name=\\"key\\" value=\\"{$product.key}\\">\\n                                <button class=\\"btn btn-default\\" type=\\"submit\\" name=\\"ms2_action\\" value=\\"cart\\/remove\\">\\n                                    <i class=\\"glyphicon glyphicon-remove\\"><\\/i>\\n                                <\\/button>\\n                            <\\/form>\\n                        <\\/td>\\n                    <\\/tr>\\n                {\\/foreach}\\n\\n                <tr class=\\"footer\\">\\n                    <th class=\\"total\\" colspan=\\"2\\">{\'ms2_cart_total\' | lexicon}:<\\/th>\\n                    <th class=\\"total_count\\">\\n                        <span class=\\"ms2_total_count\\">{$total.count}<\\/span>\\n                        {\'ms2_frontend_count_unit\' | lexicon}\\n                    <\\/th>\\n                    <th class=\\"total_weight\\">\\n                        <span class=\\"ms2_total_weight\\">{$total.weight}<\\/span>\\n                        {\'ms2_frontend_weight_unit\' | lexicon}\\n                    <\\/th>\\n                    <th class=\\"total_cost\\">\\n                        <span class=\\"ms2_total_cost\\">{$total.cost}<\\/span>\\n                        {\'ms2_frontend_currency\' | lexicon}\\n                    <\\/th>\\n                    <th>&nbsp;<\\/th>\\n                <\\/tr>\\n            <\\/table>\\n        <\\/div>\\n        <form method=\\"post\\">\\n            <button class=\\"btn btn-default\\" type=\\"submit\\" name=\\"ms2_action\\" value=\\"cart\\/clean\\">\\n                <i class=\\"glyphicon glyphicon-remove\\"><\\/i> {\'ms2_cart_clean\' | lexicon}\\n            <\\/button>\\n        <\\/form>\\n    {\\/if}\\n<\\/div>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/chunks\\/chunk.ms_cart.tpl","content":"<div id=\\"msCart\\">\\n    {if !count($products)}\\n        {\'ms2_cart_is_empty\' | lexicon}\\n    {else}\\n        <div class=\\"table-responsive\\">\\n            <table class=\\"table table-striped\\">\\n                <tr class=\\"header\\">\\n                    <th class=\\"image\\">&nbsp;<\\/th>\\n                    <th class=\\"title\\">{\'ms2_cart_title\' | lexicon}<\\/th>\\n                    <th class=\\"count\\">{\'ms2_cart_count\' | lexicon}<\\/th>\\n                    <th class=\\"weight\\">{\'ms2_cart_weight\' | lexicon}<\\/th>\\n                    <th class=\\"price\\">{\'ms2_cart_price\' | lexicon}<\\/th>\\n                    <th class=\\"remove\\">{\'ms2_cart_remove\' | lexicon}<\\/th>\\n                <\\/tr>\\n\\n                {foreach $products as $product}\\n                    <tr id=\\"{$product.key}\\">\\n                        <td class=\\"image\\">\\n                            {if $product.thumb?}\\n                                <img src=\\"{$product.thumb}\\" alt=\\"{$product.pagetitle}\\" title=\\"{$product.pagetitle}\\"\\/>\\n                            {else}\\n                                <img src=\\"{\'assets_url\' | option}components\\/minishop2\\/img\\/web\\/ms2_small.png\\"\\n                                     srcset=\\"{\'assets_url\' | option}components\\/minishop2\\/img\\/web\\/ms2_small@2x.png 2x\\"\\n                                     alt=\\"{$product.pagetitle}\\" title=\\"{$product.pagetitle}\\"\\/>\\n                            {\\/if}\\n                        <\\/td>\\n                        <td class=\\"title\\">\\n                            {if $product.id?}\\n                                <a href=\\"{$product.id | url}\\">{$product.pagetitle}<\\/a>\\n                            {else}\\n                                {$product.name}\\n                            {\\/if}\\n                            {if $product.options?}\\n                                <div class=\\"small\\">\\n                                    {$product.options | join : \'; \'}\\n                                <\\/div>\\n                            {\\/if}\\n                        <\\/td>\\n                        <td class=\\"count\\">\\n                            <form method=\\"post\\" class=\\"ms2_form form-inline\\" role=\\"form\\">\\n                                <input type=\\"hidden\\" name=\\"key\\" value=\\"{$product.key}\\"\\/>\\n                                <div class=\\"form-group\\">\\n                                    <input type=\\"number\\" name=\\"count\\" value=\\"{$product.count}\\"\\n                                           class=\\"input-sm form-control\\"\\/>\\n                                    <span class=\\"hidden-xs\\">{\'ms2_frontend_count_unit\' | lexicon}<\\/span>\\n                                    <button class=\\"btn btn-default\\" type=\\"submit\\" name=\\"ms2_action\\" value=\\"cart\\/change\\">\\n                                        <i class=\\"glyphicon glyphicon-refresh\\"><\\/i>\\n                                    <\\/button>\\n                                <\\/div>\\n                            <\\/form>\\n                        <\\/td>\\n                        <td class=\\"weight\\">\\n                            <span>{$product.weight}<\\/span> {\'ms2_frontend_weight_unit\' | lexicon}\\n                        <\\/td>\\n                        <td class=\\"price\\">\\n                            <span>{$product.price}<\\/span> {\'ms2_frontend_currency\' | lexicon}\\n                            {if $product.old_price?}\\n                            <span class=\\"old_price\\">{$product.old_price} {\'ms2_frontend_currency\' | lexicon}\\n                                {\\/if}\\n                        <\\/td>\\n                        <td class=\\"remove\\">\\n                            <form method=\\"post\\" class=\\"ms2_form\\">\\n                                <input type=\\"hidden\\" name=\\"key\\" value=\\"{$product.key}\\">\\n                                <button class=\\"btn btn-default\\" type=\\"submit\\" name=\\"ms2_action\\" value=\\"cart\\/remove\\">\\n                                    <i class=\\"glyphicon glyphicon-remove\\"><\\/i>\\n                                <\\/button>\\n                            <\\/form>\\n                        <\\/td>\\n                    <\\/tr>\\n                {\\/foreach}\\n\\n                <tr class=\\"footer\\">\\n                    <th class=\\"total\\" colspan=\\"2\\">{\'ms2_cart_total\' | lexicon}:<\\/th>\\n                    <th class=\\"total_count\\">\\n                        <span class=\\"ms2_total_count\\">{$total.count}<\\/span>\\n                        {\'ms2_frontend_count_unit\' | lexicon}\\n                    <\\/th>\\n                    <th class=\\"total_weight\\">\\n                        <span class=\\"ms2_total_weight\\">{$total.weight}<\\/span>\\n                        {\'ms2_frontend_weight_unit\' | lexicon}\\n                    <\\/th>\\n                    <th class=\\"total_cost\\">\\n                        <span class=\\"ms2_total_cost\\">{$total.cost}<\\/span>\\n                        {\'ms2_frontend_currency\' | lexicon}\\n                    <\\/th>\\n                    <th>&nbsp;<\\/th>\\n                <\\/tr>\\n            <\\/table>\\n        <\\/div>\\n        <form method=\\"post\\">\\n            <button class=\\"btn btn-default\\" type=\\"submit\\" name=\\"ms2_action\\" value=\\"cart\\/clean\\">\\n                <i class=\\"glyphicon glyphicon-remove\\"><\\/i> {\'ms2_cart_clean\' | lexicon}\\n            <\\/button>\\n        <\\/form>\\n    {\\/if}\\n<\\/div>"}',
        'guid' => '20f83607ca06054e503510f594f7bfcc',
        'native_key' => 0,
        'signature' => 'd4a25438b7e3c43b322aa8947e3b0ac4',
      ),
      'a99d5710e55a921f50899f94e58f71d3' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.msMiniCart","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<div id=\\"msMiniCart\\" class=\\"{$total_count > 0 ? \'full\' : \'\'}\\">\\n    <div class=\\"empty\\">\\n        <h5><i class=\\"glyphicon glyphicon-shopping-cart\\"><\\/i> {\'ms2_minicart\' | lexicon}<\\/h5>\\n        {\'ms2_minicart_is_empty\' | lexicon}\\n    <\\/div>\\n    <div class=\\"not_empty\\">\\n        <h5><i class=\\"glyphicon glyphicon-shopping-cart\\"><\\/i> {\'ms2_minicart\' | lexicon}<\\/h5>\\n        {\'ms2_minicart_goods\' | lexicon} <strong class=\\"ms2_total_count\\">{$total_count}<\\/strong> {\'ms2_frontend_count_unit\' | lexicon},\\n        {\'ms2_minicart_cost\' | lexicon} <strong class=\\"ms2_total_cost\\">{$total_cost}<\\/strong> {\'ms2_frontend_currency\' | lexicon}\\n    <\\/div>\\n<\\/div>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/chunks\\/chunk.ms_minicart.tpl","content":"<div id=\\"msMiniCart\\" class=\\"{$total_count > 0 ? \'full\' : \'\'}\\">\\n    <div class=\\"empty\\">\\n        <h5><i class=\\"glyphicon glyphicon-shopping-cart\\"><\\/i> {\'ms2_minicart\' | lexicon}<\\/h5>\\n        {\'ms2_minicart_is_empty\' | lexicon}\\n    <\\/div>\\n    <div class=\\"not_empty\\">\\n        <h5><i class=\\"glyphicon glyphicon-shopping-cart\\"><\\/i> {\'ms2_minicart\' | lexicon}<\\/h5>\\n        {\'ms2_minicart_goods\' | lexicon} <strong class=\\"ms2_total_count\\">{$total_count}<\\/strong> {\'ms2_frontend_count_unit\' | lexicon},\\n        {\'ms2_minicart_cost\' | lexicon} <strong class=\\"ms2_total_cost\\">{$total_cost}<\\/strong> {\'ms2_frontend_currency\' | lexicon}\\n    <\\/div>\\n<\\/div>"}',
        'guid' => '1093f6073ba6c4ecdebc720c788c19a8',
        'native_key' => 0,
        'signature' => 'a525d3b6519272443a35cab08fea9dc3',
      ),
      '8529a9dd6e1beefab95b25344b62aa96' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.msOrder","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<form class=\\"form-horizontal ms2_form\\" id=\\"msOrder\\" method=\\"post\\">\\n    <div class=\\"row\\">\\n        <div class=\\"col-md-6\\">\\n            <h4>{\'ms2_frontend_credentials\' | lexicon}:<\\/h4>\\n            {foreach [\'email\',\'receiver\',\'phone\'] as $field}\\n                <div class=\\"form-group input-parent\\">\\n                    <label class=\\"col-md-4 control-label\\" for=\\"{$field}\\">\\n                        <span class=\\"required-star\\">*<\\/span> {(\'ms2_frontend_\' ~ $field) | lexicon}\\n                    <\\/label>\\n                    <div class=\\"col-sm-6\\">\\n                        <input type=\\"text\\" id=\\"{$field}\\" placeholder=\\"{(\'ms2_frontend_\' ~ $field) | lexicon}\\"\\n                               name=\\"{$field}\\" value=\\"{$form[$field]}\\"\\n                               class=\\"form-control{($field in list $errors) ? \' error\' : \'\'}\\">\\n                    <\\/div>\\n                <\\/div>\\n            {\\/foreach}\\n\\n            <div class=\\"form-group input-parent\\">\\n                <label class=\\"col-md-4 control-label\\" for=\\"comment\\">\\n                    <span class=\\"required-star\\">*<\\/span> {\'ms2_frontend_comment\' | lexicon}<\\/label>\\n                <div class=\\"col-sm-6\\">\\n                    <textarea name=\\"comment\\" id=\\"comment\\" placeholder=\\"{\'ms2_frontend_comment\' | lexicon}\\"\\n                              class=\\"form-control{(\'comment\' in list $errors) ? \' error\' : \'\'}\\">{$form.comment}<\\/textarea>\\n                <\\/div>\\n            <\\/div>\\n        <\\/div>\\n\\n        <div class=\\"col-md-6\\" id=\\"payments\\">\\n            <h4>{\'ms2_frontend_payments\' | lexicon}:<\\/h4>\\n            <div class=\\"form-group\\">\\n                <label class=\\"col-md-4 control-label\\"><span class=\\"required-star\\">*<\\/span>\\n                    {\'ms2_frontend_payment_select\' | lexicon}<\\/label>\\n                <div class=\\"col-sm-6\\">\\n                    {foreach $payments as $payment}\\n                        <div class=\\"checkbox\\">\\n                            <label class=\\"payment input-parent\\">\\n                                <input type=\\"radio\\" name=\\"payment\\" value=\\"{$payment.id}\\" id=\\"payment_{$payment.id}\\"\\n                                        {$payment.id == $order.payment ? \'checked\' : \'\'}>\\n                                {if $payment.logo?}\\n                                    <img src=\\"{$payment.logo}\\" alt=\\"{$payment.name}\\" title=\\"{$payment.name}\\"\\/>\\n                                {else}\\n                                    {$payment.name}\\n                                {\\/if}\\n                                {if $payment.description?}\\n                                    <p class=\\"small\\">\\n                                        {$payment.description}\\n                                    <\\/p>\\n                                {\\/if}\\n                            <\\/label>\\n                        <\\/div>\\n                    {\\/foreach}\\n                <\\/div>\\n            <\\/div>\\n        <\\/div>\\n    <\\/div>\\n\\n    <div class=\\"row\\">\\n        <div class=\\"col-md-6\\" id=\\"deliveries\\">\\n            <h4>{\'ms2_frontend_deliveries\' | lexicon}:<\\/h4>\\n            <div class=\\"form-group\\">\\n                <label class=\\"col-md-4 control-label\\">\\n                    <span class=\\"required-star\\">*<\\/span> {\'ms2_frontend_delivery_select\' | lexicon}\\n                <\\/label>\\n                <div class=\\"col-sm-6\\">\\n                    {var $i = 0}\\n                    {foreach $deliveries as $idx => $delivery}\\n                        {var $checked = !$order.delivery && $i == 0 || $delivery.id == $order.delivery}\\n                        {var $i += 1}\\n                        <div class=\\"checkbox\\">\\n                            <label class=\\"delivery input-parent\\">\\n                                <input type=\\"radio\\" name=\\"delivery\\" value=\\"{$delivery.id}\\" id=\\"delivery_{$delivery.id}\\"\\n                                       data-payments=\\"{$delivery.payments | json_encode}\\"\\n                                        {$checked ? \'checked\' : \'\'}>\\n                                {if $delivery.logo?}\\n                                    <img src=\\"{$delivery.logo}\\" alt=\\"{$delivery.name}\\" title=\\"{$delivery.name}\\"\\/>\\n                                {else}\\n                                    {$delivery.name}\\n                                {\\/if}\\n                                {if $delivery.description?}\\n                                    <p class=\\"small\\">\\n                                        {$delivery.description}\\n                                    <\\/p>\\n                                {\\/if}\\n                            <\\/label>\\n                        <\\/div>\\n                    {\\/foreach}\\n                <\\/div>\\n            <\\/div>\\n        <\\/div>\\n\\n        <div class=\\"col-md-6\\">\\n            <h4>{\'ms2_frontend_address\' | lexicon}:<\\/h4>\\n            {foreach [\'index\',\'region\',\'city\'] as $field}\\n                <div class=\\"form-group input-parent\\">\\n                    <label class=\\"col-md-4 control-label\\" for=\\"{$field}\\">\\n                        <span class=\\"required-star\\">*<\\/span> {(\'ms2_frontend_\' ~ $field) | lexicon}\\n                    <\\/label>\\n                    <div class=\\"col-sm-6\\">\\n                        <input type=\\"text\\" id=\\"{$field}\\" placeholder=\\"{(\'ms2_frontend_\' ~ $field) | lexicon}\\"\\n                               name=\\"{$field}\\" value=\\"{$form[$field]}\\"\\n                               class=\\"form-control{($field in list $errors) ? \' error\' : \'\'}\\">\\n                    <\\/div>\\n                <\\/div>\\n            {\\/foreach}\\n            <div class=\\"form-group input-parent\\">\\n                <label class=\\"col-md-4 control-label\\" for=\\"street\\">\\n                    <span class=\\"required-star\\">*<\\/span> {\'ms2_frontend_street\' | lexicon}<\\/label>\\n                <div class=\\"col-md-6 row\\">\\n                    {foreach [\'street\',\'building\',\'room\'] as $field}\\n                        <div class=\\"col-md-4\\">\\n                            <input type=\\"text\\" id=\\"{$field}\\" placeholder=\\"{(\'ms2_frontend_\' ~ $field) | lexicon}\\"\\n                                   name=\\"{$field}\\" value=\\"{$form[$field]}\\"\\n                                   class=\\"form-control{($field in list $errors) ? \' error\' : \'\'}\\">\\n                        <\\/div>\\n                    {\\/foreach}\\n                <\\/div>\\n            <\\/div>\\n        <\\/div>\\n\\n    <\\/div>\\n\\n    <button type=\\"button\\" name=\\"ms2_action\\" value=\\"order\\/clean\\" class=\\"btn btn-default ms2_link\\">\\n        <i class=\\"glyphicon glyphicon-remove\\"><\\/i> {\'ms2_frontend_order_cancel\' | lexicon}\\n    <\\/button>\\n\\n    <hr\\/>\\n    <div class=\\"well\\">\\n        <div class=\\"col-md-offset-2\\">\\n            <h3>{\'ms2_frontend_order_cost\' | lexicon}:\\n                <span id=\\"ms2_order_cost\\">{$order.cost ?: 0}<\\/span>\\n                {\'ms2_frontend_currency\' | lexicon}\\n            <\\/h3>\\n            <button type=\\"submit\\" name=\\"ms2_action\\" value=\\"order\\/submit\\" class=\\"btn btn-default btn-primary ms2_link\\">\\n                {\'ms2_frontend_order_submit\' | lexicon}\\n            <\\/button>\\n        <\\/div>\\n    <\\/div>\\n<\\/form>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/chunks\\/chunk.ms_order.tpl","content":"<form class=\\"form-horizontal ms2_form\\" id=\\"msOrder\\" method=\\"post\\">\\n    <div class=\\"row\\">\\n        <div class=\\"col-md-6\\">\\n            <h4>{\'ms2_frontend_credentials\' | lexicon}:<\\/h4>\\n            {foreach [\'email\',\'receiver\',\'phone\'] as $field}\\n                <div class=\\"form-group input-parent\\">\\n                    <label class=\\"col-md-4 control-label\\" for=\\"{$field}\\">\\n                        <span class=\\"required-star\\">*<\\/span> {(\'ms2_frontend_\' ~ $field) | lexicon}\\n                    <\\/label>\\n                    <div class=\\"col-sm-6\\">\\n                        <input type=\\"text\\" id=\\"{$field}\\" placeholder=\\"{(\'ms2_frontend_\' ~ $field) | lexicon}\\"\\n                               name=\\"{$field}\\" value=\\"{$form[$field]}\\"\\n                               class=\\"form-control{($field in list $errors) ? \' error\' : \'\'}\\">\\n                    <\\/div>\\n                <\\/div>\\n            {\\/foreach}\\n\\n            <div class=\\"form-group input-parent\\">\\n                <label class=\\"col-md-4 control-label\\" for=\\"comment\\">\\n                    <span class=\\"required-star\\">*<\\/span> {\'ms2_frontend_comment\' | lexicon}<\\/label>\\n                <div class=\\"col-sm-6\\">\\n                    <textarea name=\\"comment\\" id=\\"comment\\" placeholder=\\"{\'ms2_frontend_comment\' | lexicon}\\"\\n                              class=\\"form-control{(\'comment\' in list $errors) ? \' error\' : \'\'}\\">{$form.comment}<\\/textarea>\\n                <\\/div>\\n            <\\/div>\\n        <\\/div>\\n\\n        <div class=\\"col-md-6\\" id=\\"payments\\">\\n            <h4>{\'ms2_frontend_payments\' | lexicon}:<\\/h4>\\n            <div class=\\"form-group\\">\\n                <label class=\\"col-md-4 control-label\\"><span class=\\"required-star\\">*<\\/span>\\n                    {\'ms2_frontend_payment_select\' | lexicon}<\\/label>\\n                <div class=\\"col-sm-6\\">\\n                    {foreach $payments as $payment}\\n                        <div class=\\"checkbox\\">\\n                            <label class=\\"payment input-parent\\">\\n                                <input type=\\"radio\\" name=\\"payment\\" value=\\"{$payment.id}\\" id=\\"payment_{$payment.id}\\"\\n                                        {$payment.id == $order.payment ? \'checked\' : \'\'}>\\n                                {if $payment.logo?}\\n                                    <img src=\\"{$payment.logo}\\" alt=\\"{$payment.name}\\" title=\\"{$payment.name}\\"\\/>\\n                                {else}\\n                                    {$payment.name}\\n                                {\\/if}\\n                                {if $payment.description?}\\n                                    <p class=\\"small\\">\\n                                        {$payment.description}\\n                                    <\\/p>\\n                                {\\/if}\\n                            <\\/label>\\n                        <\\/div>\\n                    {\\/foreach}\\n                <\\/div>\\n            <\\/div>\\n        <\\/div>\\n    <\\/div>\\n\\n    <div class=\\"row\\">\\n        <div class=\\"col-md-6\\" id=\\"deliveries\\">\\n            <h4>{\'ms2_frontend_deliveries\' | lexicon}:<\\/h4>\\n            <div class=\\"form-group\\">\\n                <label class=\\"col-md-4 control-label\\">\\n                    <span class=\\"required-star\\">*<\\/span> {\'ms2_frontend_delivery_select\' | lexicon}\\n                <\\/label>\\n                <div class=\\"col-sm-6\\">\\n                    {var $i = 0}\\n                    {foreach $deliveries as $idx => $delivery}\\n                        {var $checked = !$order.delivery && $i == 0 || $delivery.id == $order.delivery}\\n                        {var $i += 1}\\n                        <div class=\\"checkbox\\">\\n                            <label class=\\"delivery input-parent\\">\\n                                <input type=\\"radio\\" name=\\"delivery\\" value=\\"{$delivery.id}\\" id=\\"delivery_{$delivery.id}\\"\\n                                       data-payments=\\"{$delivery.payments | json_encode}\\"\\n                                        {$checked ? \'checked\' : \'\'}>\\n                                {if $delivery.logo?}\\n                                    <img src=\\"{$delivery.logo}\\" alt=\\"{$delivery.name}\\" title=\\"{$delivery.name}\\"\\/>\\n                                {else}\\n                                    {$delivery.name}\\n                                {\\/if}\\n                                {if $delivery.description?}\\n                                    <p class=\\"small\\">\\n                                        {$delivery.description}\\n                                    <\\/p>\\n                                {\\/if}\\n                            <\\/label>\\n                        <\\/div>\\n                    {\\/foreach}\\n                <\\/div>\\n            <\\/div>\\n        <\\/div>\\n\\n        <div class=\\"col-md-6\\">\\n            <h4>{\'ms2_frontend_address\' | lexicon}:<\\/h4>\\n            {foreach [\'index\',\'region\',\'city\'] as $field}\\n                <div class=\\"form-group input-parent\\">\\n                    <label class=\\"col-md-4 control-label\\" for=\\"{$field}\\">\\n                        <span class=\\"required-star\\">*<\\/span> {(\'ms2_frontend_\' ~ $field) | lexicon}\\n                    <\\/label>\\n                    <div class=\\"col-sm-6\\">\\n                        <input type=\\"text\\" id=\\"{$field}\\" placeholder=\\"{(\'ms2_frontend_\' ~ $field) | lexicon}\\"\\n                               name=\\"{$field}\\" value=\\"{$form[$field]}\\"\\n                               class=\\"form-control{($field in list $errors) ? \' error\' : \'\'}\\">\\n                    <\\/div>\\n                <\\/div>\\n            {\\/foreach}\\n            <div class=\\"form-group input-parent\\">\\n                <label class=\\"col-md-4 control-label\\" for=\\"street\\">\\n                    <span class=\\"required-star\\">*<\\/span> {\'ms2_frontend_street\' | lexicon}<\\/label>\\n                <div class=\\"col-md-6 row\\">\\n                    {foreach [\'street\',\'building\',\'room\'] as $field}\\n                        <div class=\\"col-md-4\\">\\n                            <input type=\\"text\\" id=\\"{$field}\\" placeholder=\\"{(\'ms2_frontend_\' ~ $field) | lexicon}\\"\\n                                   name=\\"{$field}\\" value=\\"{$form[$field]}\\"\\n                                   class=\\"form-control{($field in list $errors) ? \' error\' : \'\'}\\">\\n                        <\\/div>\\n                    {\\/foreach}\\n                <\\/div>\\n            <\\/div>\\n        <\\/div>\\n\\n    <\\/div>\\n\\n    <button type=\\"button\\" name=\\"ms2_action\\" value=\\"order\\/clean\\" class=\\"btn btn-default ms2_link\\">\\n        <i class=\\"glyphicon glyphicon-remove\\"><\\/i> {\'ms2_frontend_order_cancel\' | lexicon}\\n    <\\/button>\\n\\n    <hr\\/>\\n    <div class=\\"well\\">\\n        <div class=\\"col-md-offset-2\\">\\n            <h3>{\'ms2_frontend_order_cost\' | lexicon}:\\n                <span id=\\"ms2_order_cost\\">{$order.cost ?: 0}<\\/span>\\n                {\'ms2_frontend_currency\' | lexicon}\\n            <\\/h3>\\n            <button type=\\"submit\\" name=\\"ms2_action\\" value=\\"order\\/submit\\" class=\\"btn btn-default btn-primary ms2_link\\">\\n                {\'ms2_frontend_order_submit\' | lexicon}\\n            <\\/button>\\n        <\\/div>\\n    <\\/div>\\n<\\/form>"}',
        'guid' => 'fe81e2f198d3fb5d60d314998d28bacd',
        'native_key' => 0,
        'signature' => 'ccfd4cd6b27faee552308a961c365d19',
      ),
      'e637b3da17f8b9cf30b77a887c350cf9' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.msGetOrder","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<div id=\\"msCart\\">\\n    <div class=\\"table-responsive\\">\\n        <table class=\\"table table-striped\\">\\n            <tr class=\\"header\\">\\n                <th class=\\"image col-md-2\\">&nbsp;<\\/th>\\n                <th class=\\"title col-md-4\\">{\'ms2_cart_title\' | lexicon}<\\/th>\\n                <th class=\\"count col-md-2\\">{\'ms2_cart_count\' | lexicon}<\\/th>\\n                <th class=\\"weight col-md-1\\">{\'ms2_cart_weight\' | lexicon}<\\/th>\\n                <th class=\\"price col-md-1\\">{\'ms2_cart_cost\' | lexicon}<\\/th>\\n            <\\/tr>\\n            {foreach $products as $product}\\n                <tr>\\n                    <td class=\\"image\\">\\n                        {if $product.thumb?}\\n                            <img src=\\"{$product.thumb}\\" alt=\\"{$product.pagetitle}\\" title=\\"{$product.pagetitle}\\"\\/>\\n                        {else}\\n                            <img src=\\"{\'assets_url\' | option}components\\/minishop2\\/img\\/web\\/ms2_small.png\\"\\n                                 srcset=\\"{\'assets_url\' | option}components\\/minishop2\\/img\\/web\\/ms2_small@2x.png 2x\\"\\n                                 alt=\\"{$product.pagetitle}\\" title=\\"{$product.pagetitle}\\"\\/>\\n                        {\\/if}\\n                    <\\/td>\\n                    <td class=\\"title\\">\\n                        {if $product.id?}\\n                            <a href=\\"{$product.id | url}\\">{$product.name}<\\/a>\\n                        {else}\\n                            {$product.name}\\n                        {\\/if}\\n                        {if $product.options?}\\n                            <div class=\\"small\\">\\n                                {$product.options | join : \'; \'}\\n                            <\\/div>\\n                        {\\/if}\\n                    <\\/td>\\n                    <td class=\\"count\\">{$product.count} {\'ms2_frontend_count_unit\' | lexicon}<\\/td>\\n                    <td class=\\"weight\\">{$product.weight} {\'ms2_frontend_weight_unit\' | lexicon}<\\/td>\\n                    <td class=\\"price\\">{$product.price} {\'ms2_frontend_currency\' | lexicon}<\\/td>\\n                <\\/tr>\\n            {\\/foreach}\\n            <tr class=\\"footer\\">\\n                <th class=\\"total\\" colspan=\\"2\\">{\'ms2_cart_total\' | lexicon}:<\\/th>\\n                <th class=\\"total_count\\">\\n                    <span class=\\"ms2_total_count\\">{$total.cart_count}<\\/span> {\'ms2_frontend_count_unit\' | lexicon}\\n                <\\/th>\\n                <th class=\\"total_weight\\">\\n                    <span class=\\"ms2_total_weight\\">{$total.cart_weight}<\\/span> {\'ms2_frontend_weight_unit\' | lexicon}\\n                <\\/th>\\n                <th class=\\"total_cost\\">\\n                    <span class=\\"ms2_total_cost\\">{$total.cart_cost}<\\/span> {\'ms2_frontend_currency\' | lexicon}\\n                <\\/th>\\n            <\\/tr>\\n        <\\/table>\\n    <\\/div>\\n\\n    <h4>\\n        {\'ms2_frontend_order_cost\' | lexicon}:\\n        {if $total.delivery_cost}\\n            {$total.cart_cost} {\'ms2_frontend_currency\' | lexicon} + {$total.delivery_cost}\\n            {\'ms2_frontend_currency\' | lexicon} =\\n        {\\/if}\\n        <strong>{$total.cost}<\\/strong> {\'ms2_frontend_currency\' | lexicon}\\n    <\\/h4>\\n<\\/div>\\n","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/chunks\\/chunk.ms_get_order.tpl","content":"<div id=\\"msCart\\">\\n    <div class=\\"table-responsive\\">\\n        <table class=\\"table table-striped\\">\\n            <tr class=\\"header\\">\\n                <th class=\\"image col-md-2\\">&nbsp;<\\/th>\\n                <th class=\\"title col-md-4\\">{\'ms2_cart_title\' | lexicon}<\\/th>\\n                <th class=\\"count col-md-2\\">{\'ms2_cart_count\' | lexicon}<\\/th>\\n                <th class=\\"weight col-md-1\\">{\'ms2_cart_weight\' | lexicon}<\\/th>\\n                <th class=\\"price col-md-1\\">{\'ms2_cart_cost\' | lexicon}<\\/th>\\n            <\\/tr>\\n            {foreach $products as $product}\\n                <tr>\\n                    <td class=\\"image\\">\\n                        {if $product.thumb?}\\n                            <img src=\\"{$product.thumb}\\" alt=\\"{$product.pagetitle}\\" title=\\"{$product.pagetitle}\\"\\/>\\n                        {else}\\n                            <img src=\\"{\'assets_url\' | option}components\\/minishop2\\/img\\/web\\/ms2_small.png\\"\\n                                 srcset=\\"{\'assets_url\' | option}components\\/minishop2\\/img\\/web\\/ms2_small@2x.png 2x\\"\\n                                 alt=\\"{$product.pagetitle}\\" title=\\"{$product.pagetitle}\\"\\/>\\n                        {\\/if}\\n                    <\\/td>\\n                    <td class=\\"title\\">\\n                        {if $product.id?}\\n                            <a href=\\"{$product.id | url}\\">{$product.name}<\\/a>\\n                        {else}\\n                            {$product.name}\\n                        {\\/if}\\n                        {if $product.options?}\\n                            <div class=\\"small\\">\\n                                {$product.options | join : \'; \'}\\n                            <\\/div>\\n                        {\\/if}\\n                    <\\/td>\\n                    <td class=\\"count\\">{$product.count} {\'ms2_frontend_count_unit\' | lexicon}<\\/td>\\n                    <td class=\\"weight\\">{$product.weight} {\'ms2_frontend_weight_unit\' | lexicon}<\\/td>\\n                    <td class=\\"price\\">{$product.price} {\'ms2_frontend_currency\' | lexicon}<\\/td>\\n                <\\/tr>\\n            {\\/foreach}\\n            <tr class=\\"footer\\">\\n                <th class=\\"total\\" colspan=\\"2\\">{\'ms2_cart_total\' | lexicon}:<\\/th>\\n                <th class=\\"total_count\\">\\n                    <span class=\\"ms2_total_count\\">{$total.cart_count}<\\/span> {\'ms2_frontend_count_unit\' | lexicon}\\n                <\\/th>\\n                <th class=\\"total_weight\\">\\n                    <span class=\\"ms2_total_weight\\">{$total.cart_weight}<\\/span> {\'ms2_frontend_weight_unit\' | lexicon}\\n                <\\/th>\\n                <th class=\\"total_cost\\">\\n                    <span class=\\"ms2_total_cost\\">{$total.cart_cost}<\\/span> {\'ms2_frontend_currency\' | lexicon}\\n                <\\/th>\\n            <\\/tr>\\n        <\\/table>\\n    <\\/div>\\n\\n    <h4>\\n        {\'ms2_frontend_order_cost\' | lexicon}:\\n        {if $total.delivery_cost}\\n            {$total.cart_cost} {\'ms2_frontend_currency\' | lexicon} + {$total.delivery_cost}\\n            {\'ms2_frontend_currency\' | lexicon} =\\n        {\\/if}\\n        <strong>{$total.cost}<\\/strong> {\'ms2_frontend_currency\' | lexicon}\\n    <\\/h4>\\n<\\/div>\\n"}',
        'guid' => 'b098becf870cb8ff9b26559fc8ef3d87',
        'native_key' => 0,
        'signature' => 'ad4be725800ca1d9d4cbc6ec2cbd6ba4',
      ),
      'bd9d3a23fe0d3d091d953440692f8314' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.msOptions","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"{foreach $options as $name => $values}\\n    <div class=\\"form-group\\">\\n        <label class=\\"col-md-2 control-label\\" for=\\"option_{$name}\\">{(\'ms2_product_\' ~ $name) | lexicon}:<\\/label>\\n        <div class=\\"col-md-10\\">\\n            <select name=\\"options[{$name}]\\" class=\\"input-sm form-control\\" id=\\"option_{$name}\\">\\n                {foreach $values as $value}\\n                    <option value=\\"{$value}\\">{$value}<\\/option>\\n                {\\/foreach}\\n            <\\/select>\\n        <\\/div>\\n    <\\/div>\\n{\\/foreach}","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/chunks\\/chunk.ms_options.tpl","content":"{foreach $options as $name => $values}\\n    <div class=\\"form-group\\">\\n        <label class=\\"col-md-2 control-label\\" for=\\"option_{$name}\\">{(\'ms2_product_\' ~ $name) | lexicon}:<\\/label>\\n        <div class=\\"col-md-10\\">\\n            <select name=\\"options[{$name}]\\" class=\\"input-sm form-control\\" id=\\"option_{$name}\\">\\n                {foreach $values as $value}\\n                    <option value=\\"{$value}\\">{$value}<\\/option>\\n                {\\/foreach}\\n            <\\/select>\\n        <\\/div>\\n    <\\/div>\\n{\\/foreach}"}',
        'guid' => '5fe2211c46b7f0335a741ff8959e86c7',
        'native_key' => 0,
        'signature' => 'b22d1adf33eea314bf553351b3928f33',
      ),
      'd65aa24b58a0bd4ba00f84956453fd37' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.msProductOptions","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"{foreach $options as $option}\\n    <div class=\\"form-group\\">\\n        <label class=\\"col-md-2 control-label\\">{$option.caption}:<\\/label>\\n        <div class=\\"col-md-10 form-control-static\\">\\n            {if $option.value is array}\\n                {$option.value | join : \', \'}\\n            {else}\\n                {$option.value}\\n            {\\/if}\\n        <\\/div>\\n    <\\/div>\\n{\\/foreach}\\n","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/chunks\\/chunk.ms_product_options.tpl","content":"{foreach $options as $option}\\n    <div class=\\"form-group\\">\\n        <label class=\\"col-md-2 control-label\\">{$option.caption}:<\\/label>\\n        <div class=\\"col-md-10 form-control-static\\">\\n            {if $option.value is array}\\n                {$option.value | join : \', \'}\\n            {else}\\n                {$option.value}\\n            {\\/if}\\n        <\\/div>\\n    <\\/div>\\n{\\/foreach}\\n"}',
        'guid' => 'bb785cc66d3b273afb184b0f7e966fc0',
        'native_key' => 0,
        'signature' => 'fa90eda13ec01737b91660755e5d6d16',
      ),
      '32e6b30f64b83c41fa10288633387e8c' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.msGallery","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<div id=\\"msGallery\\">\\n    {if $files?}\\n        <div class=\\"fotorama\\"\\n             data-nav=\\"thumbs\\"\\n             data-thumbheight=\\"45\\"\\n             data-allowfullscreen=\\"true\\"\\n             data-swipe=\\"true\\"\\n             data-autoplay=\\"5000\\">\\n            {foreach $files as $file}\\n                <a href=\\"{$file[\'url\']}\\" target=\\"_blank\\">\\n                    <img src=\\"{$file[\'small\']}\\" alt=\\"\\" title=\\"\\">\\n                <\\/a>\\n            {\\/foreach}\\n        <\\/div>\\n    {else}\\n        <img src=\\"{(\'assets_url\' | option) ~ \'components\\/minishop2\\/img\\/web\\/ms2_medium.png\'}\\"\\n             srcset=\\"{(\'assets_url\' | option) ~ \'components\\/minishop2\\/img\\/web\\/ms2_medium@2x.png\'} 2x\\"\\n             alt=\\"\\" title=\\"\\"\\/>\\n    {\\/if}\\n<\\/div>\\n\\n","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/chunks\\/chunk.ms_gallery.tpl","content":"<div id=\\"msGallery\\">\\n    {if $files?}\\n        <div class=\\"fotorama\\"\\n             data-nav=\\"thumbs\\"\\n             data-thumbheight=\\"45\\"\\n             data-allowfullscreen=\\"true\\"\\n             data-swipe=\\"true\\"\\n             data-autoplay=\\"5000\\">\\n            {foreach $files as $file}\\n                <a href=\\"{$file[\'url\']}\\" target=\\"_blank\\">\\n                    <img src=\\"{$file[\'small\']}\\" alt=\\"\\" title=\\"\\">\\n                <\\/a>\\n            {\\/foreach}\\n        <\\/div>\\n    {else}\\n        <img src=\\"{(\'assets_url\' | option) ~ \'components\\/minishop2\\/img\\/web\\/ms2_medium.png\'}\\"\\n             srcset=\\"{(\'assets_url\' | option) ~ \'components\\/minishop2\\/img\\/web\\/ms2_medium@2x.png\'} 2x\\"\\n             alt=\\"\\" title=\\"\\"\\/>\\n    {\\/if}\\n<\\/div>\\n\\n"}',
        'guid' => '8650f89a20a171d0573bc83ac262f758',
        'native_key' => 0,
        'signature' => '886192e22d4525b8aca64acd66b1b771',
      ),
      '2b07bf6b3b8010f395880ec379170864' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.msEmail","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"{var $style = [\\n\'logo\' => \'display:block;margin: auto;\',\\n\'a\' => \'color:#348eda;\',\\n\'p\' => \'font-family: Arial;color: #666666;font-size: 12px;\',\\n\'h\' => \'font-family:Arial;color: #111111;font-weight: 200;line-height: 1.2em;margin: 40px 20px;\',\\n\'h1\' => \'font-size: 36px;\',\\n\'h2\' => \'font-size: 28px;\',\\n\'h3\' => \'font-size: 22px;\',\\n\'th\' => \'font-family: Arial;text-align: left;color: #111111;\',\\n\'td\' => \'font-family: Arial;text-align: left;color: #111111;\',\\n]}\\n\\n{var $site_url = (\'site_url\' | option) | preg_replace : \'#\\/$#\' : \'\'}\\n{var $assets_url = \'assets_url\' | option}\\n<!DOCTYPE html PUBLIC \\"-\\/\\/W3C\\/\\/DTD XHTML 1.0 Transitional\\/\\/EN\\"\\n        \\"http:\\/\\/www.w3.org\\/TR\\/xhtml1\\/DTD\\/xhtml1-transitional.dtd\\">\\n<html xmlns=\\"http:\\/\\/www.w3.org\\/1999\\/xhtml\\">\\n<head>\\n    <meta http-equiv=\\"Content-Type\\" content=\\"text\\/html; charset=utf-8\\"\\/>\\n    <title>{\'site_name\' | option}<\\/title>\\n<\\/head>\\n<body style=\\"margin:0;padding:0;background:#f6f6f6;\\">\\n<div style=\\"height:100%;padding-top:20px;background:#f6f6f6;\\">\\n    {block \'logo\'}\\n        <a href=\\"{$site_url}\\">\\n            <img style=\\"{$style.logo}\\"\\n                 src=\\"{$site_url}{$assets_url}components\\/minishop2\\/img\\/web\\/ms2_small@2x.png\\"\\n                 alt=\\"{$site_url}\\"\\n                 width=\\"120\\" height=\\"90\\"\\/>\\n        <\\/a>\\n    {\\/block}\\n    <!-- body -->\\n    <table class=\\"body-wrap\\" style=\\"padding:0 20px 20px 20px;width: 100%;background:#f6f6f6;margin-top:10px;\\">\\n        <tr>\\n            <td><\\/td>\\n            <td class=\\"container\\" style=\\"border:1px solid #f0f0f0;background:#ffffff;width:800px;margin:auto;\\">\\n                <div class=\\"content\\">\\n                    <table style=\\"width:100%;\\">\\n                        <tr>\\n                            <td>\\n                                <h3 style=\\"{$style.h}{$style.h3}\\">\\n                                    {block \'title\'}\\n                                        miniShop2\\n                                    {\\/block}\\n                                <\\/h3>\\n\\n                                {block \'products\'}\\n                                    <table style=\\"width:90%;margin:auto;\\">\\n                                        <thead>\\n                                        <tr>\\n                                            <th>&nbsp;<\\/th>\\n                                            <th style=\\"{$style.th}\\">{\'ms2_cart_title\' | lexicon}<\\/th>\\n                                            <th style=\\"{$style.th}\\">{\'ms2_cart_count\' | lexicon}<\\/th>\\n                                            <th style=\\"{$style.th}\\">{\'ms2_cart_weight\' | lexicon}<\\/th>\\n                                            <th style=\\"{$style.th}\\">{\'ms2_cart_cost\' | lexicon}<\\/th>\\n                                        <\\/tr>\\n                                        <\\/thead>\\n                                        {foreach $products as $product}\\n                                            <tr>\\n                                                <td style=\\"{$style.th}\\">\\n                                                    {if $product.thumb?}\\n                                                        <img src=\\"{$site_url}{$product.thumb}\\"\\n                                                             alt=\\"{$product.pagetitle}\\"\\n                                                             title=\\"{$product.pagetitle}\\"\\n                                                             width=\\"120\\" height=\\"90\\"\\/>\\n                                                    {else}\\n                                                        <img src=\\"{$site_url}{$assets_url}components\\/minishop2\\/img\\/web\\/ms2_small@2x.png\\"\\n                                                             alt=\\"{$product.pagetitle}\\"\\n                                                             title=\\"{$product.pagetitle}\\"\\n                                                             width=\\"120\\" height=\\"90\\"\\/>\\n                                                    {\\/if}\\n                                                <\\/td>\\n                                                <td style=\\"{$style.th}\\">\\n                                                    {if $product.id?}\\n                                                        <a href=\\"{$product.id | url : [\'scheme\' => \'full\']}\\"\\n                                                           style=\\"{$style.a}\\">\\n                                                            {$product.name}\\n                                                        <\\/a>\\n                                                    {else}\\n                                                        {$product.name}\\n                                                    {\\/if}\\n                                                    {if $product.options?}\\n                                                        <div class=\\"small\\">\\n                                                            {$product.options | join : \'; \'}\\n                                                        <\\/div>\\n                                                    {\\/if}\\n                                                <\\/td>\\n                                                <td style=\\"{$style.th}\\">{$product.count} {\'ms2_frontend_count_unit\' | lexicon}<\\/td>\\n                                                <td style=\\"{$style.th}\\">{$product.weight} {\'ms2_frontend_weight_unit\' | lexicon}<\\/td>\\n                                                <td style=\\"{$style.th}\\">{$product.price} {\'ms2_frontend_currency\' | lexicon}<\\/td>\\n                                            <\\/tr>\\n                                        {\\/foreach}\\n                                        <tfoot>\\n                                        <tr>\\n                                            <th colspan=\\"2\\"><\\/th>\\n                                            <th style=\\"{$style.th}\\">\\n                                                {$total.cart_count} {\'ms2_frontend_count_unit\' | lexicon}\\n                                            <\\/th>\\n                                            <th style=\\"{$style.th}\\">\\n                                                {$total.cart_weight} {\'ms2_frontend_weight_unit\' | lexicon}\\n                                            <\\/th>\\n                                            <th style=\\"{$style.th}\\">\\n                                                {$total.cart_cost} {\'ms2_frontend_currency\' | lexicon}\\n                                            <\\/th>\\n                                        <\\/tr>\\n                                        <\\/tfoot>\\n                                    <\\/table>\\n                                    <h3 style=\\"{$style.h}{$style.h3}\\">\\n                                        {\'ms2_frontend_order_cost\' | lexicon}:\\n                                        {if $total.delivery_cost}\\n                                            {$total.cart_cost} {\'ms2_frontend_currency\' | lexicon} + {$total.delivery_cost}\\n                                            {\'ms2_frontend_currency\' | lexicon} =\\n                                        {\\/if}\\n                                        <strong>{$total.cost}<\\/strong> {\'ms2_frontend_currency\' | lexicon}\\n                                    <\\/h3>\\n                                {\\/block}\\n                            <\\/td>\\n                        <\\/tr>\\n                    <\\/table>\\n                <\\/div>\\n                <!-- \\/content -->\\n            <\\/td>\\n            <td><\\/td>\\n        <\\/tr>\\n    <\\/table>\\n    <!-- \\/body -->\\n    <!-- footer -->\\n    <table style=\\"clear:both !important;width: 100%;\\">\\n        <tr>\\n            <td><\\/td>\\n            <td class=\\"container\\">\\n                <!-- content -->\\n                <div class=\\"content\\">\\n                    <table style=\\"width:100%;text-align: center;\\">\\n                        <tr>\\n                            <td align=\\"center\\">\\n                                <p style=\\"{$style.p}\\">\\n                                    {block \'footer\'}\\n                                    <a href=\\"{$site_url}\\" style=\\"color: #999999;\\">\\n                                        {\'site_name\' | option}\\n                                    <\\/a>\\n                                    {\\/block}\\n                                <\\/p>\\n                            <\\/td>\\n                        <\\/tr>\\n                    <\\/table>\\n                <\\/div>\\n                <!-- \\/content -->\\n            <\\/td>\\n            <td><\\/td>\\n        <\\/tr>\\n    <\\/table>\\n    <!-- \\/footer -->\\n<\\/div>\\n<\\/body>\\n<\\/html>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/chunks\\/chunk.ms_email.tpl","content":"{var $style = [\\n\'logo\' => \'display:block;margin: auto;\',\\n\'a\' => \'color:#348eda;\',\\n\'p\' => \'font-family: Arial;color: #666666;font-size: 12px;\',\\n\'h\' => \'font-family:Arial;color: #111111;font-weight: 200;line-height: 1.2em;margin: 40px 20px;\',\\n\'h1\' => \'font-size: 36px;\',\\n\'h2\' => \'font-size: 28px;\',\\n\'h3\' => \'font-size: 22px;\',\\n\'th\' => \'font-family: Arial;text-align: left;color: #111111;\',\\n\'td\' => \'font-family: Arial;text-align: left;color: #111111;\',\\n]}\\n\\n{var $site_url = (\'site_url\' | option) | preg_replace : \'#\\/$#\' : \'\'}\\n{var $assets_url = \'assets_url\' | option}\\n<!DOCTYPE html PUBLIC \\"-\\/\\/W3C\\/\\/DTD XHTML 1.0 Transitional\\/\\/EN\\"\\n        \\"http:\\/\\/www.w3.org\\/TR\\/xhtml1\\/DTD\\/xhtml1-transitional.dtd\\">\\n<html xmlns=\\"http:\\/\\/www.w3.org\\/1999\\/xhtml\\">\\n<head>\\n    <meta http-equiv=\\"Content-Type\\" content=\\"text\\/html; charset=utf-8\\"\\/>\\n    <title>{\'site_name\' | option}<\\/title>\\n<\\/head>\\n<body style=\\"margin:0;padding:0;background:#f6f6f6;\\">\\n<div style=\\"height:100%;padding-top:20px;background:#f6f6f6;\\">\\n    {block \'logo\'}\\n        <a href=\\"{$site_url}\\">\\n            <img style=\\"{$style.logo}\\"\\n                 src=\\"{$site_url}{$assets_url}components\\/minishop2\\/img\\/web\\/ms2_small@2x.png\\"\\n                 alt=\\"{$site_url}\\"\\n                 width=\\"120\\" height=\\"90\\"\\/>\\n        <\\/a>\\n    {\\/block}\\n    <!-- body -->\\n    <table class=\\"body-wrap\\" style=\\"padding:0 20px 20px 20px;width: 100%;background:#f6f6f6;margin-top:10px;\\">\\n        <tr>\\n            <td><\\/td>\\n            <td class=\\"container\\" style=\\"border:1px solid #f0f0f0;background:#ffffff;width:800px;margin:auto;\\">\\n                <div class=\\"content\\">\\n                    <table style=\\"width:100%;\\">\\n                        <tr>\\n                            <td>\\n                                <h3 style=\\"{$style.h}{$style.h3}\\">\\n                                    {block \'title\'}\\n                                        miniShop2\\n                                    {\\/block}\\n                                <\\/h3>\\n\\n                                {block \'products\'}\\n                                    <table style=\\"width:90%;margin:auto;\\">\\n                                        <thead>\\n                                        <tr>\\n                                            <th>&nbsp;<\\/th>\\n                                            <th style=\\"{$style.th}\\">{\'ms2_cart_title\' | lexicon}<\\/th>\\n                                            <th style=\\"{$style.th}\\">{\'ms2_cart_count\' | lexicon}<\\/th>\\n                                            <th style=\\"{$style.th}\\">{\'ms2_cart_weight\' | lexicon}<\\/th>\\n                                            <th style=\\"{$style.th}\\">{\'ms2_cart_cost\' | lexicon}<\\/th>\\n                                        <\\/tr>\\n                                        <\\/thead>\\n                                        {foreach $products as $product}\\n                                            <tr>\\n                                                <td style=\\"{$style.th}\\">\\n                                                    {if $product.thumb?}\\n                                                        <img src=\\"{$site_url}{$product.thumb}\\"\\n                                                             alt=\\"{$product.pagetitle}\\"\\n                                                             title=\\"{$product.pagetitle}\\"\\n                                                             width=\\"120\\" height=\\"90\\"\\/>\\n                                                    {else}\\n                                                        <img src=\\"{$site_url}{$assets_url}components\\/minishop2\\/img\\/web\\/ms2_small@2x.png\\"\\n                                                             alt=\\"{$product.pagetitle}\\"\\n                                                             title=\\"{$product.pagetitle}\\"\\n                                                             width=\\"120\\" height=\\"90\\"\\/>\\n                                                    {\\/if}\\n                                                <\\/td>\\n                                                <td style=\\"{$style.th}\\">\\n                                                    {if $product.id?}\\n                                                        <a href=\\"{$product.id | url : [\'scheme\' => \'full\']}\\"\\n                                                           style=\\"{$style.a}\\">\\n                                                            {$product.name}\\n                                                        <\\/a>\\n                                                    {else}\\n                                                        {$product.name}\\n                                                    {\\/if}\\n                                                    {if $product.options?}\\n                                                        <div class=\\"small\\">\\n                                                            {$product.options | join : \'; \'}\\n                                                        <\\/div>\\n                                                    {\\/if}\\n                                                <\\/td>\\n                                                <td style=\\"{$style.th}\\">{$product.count} {\'ms2_frontend_count_unit\' | lexicon}<\\/td>\\n                                                <td style=\\"{$style.th}\\">{$product.weight} {\'ms2_frontend_weight_unit\' | lexicon}<\\/td>\\n                                                <td style=\\"{$style.th}\\">{$product.price} {\'ms2_frontend_currency\' | lexicon}<\\/td>\\n                                            <\\/tr>\\n                                        {\\/foreach}\\n                                        <tfoot>\\n                                        <tr>\\n                                            <th colspan=\\"2\\"><\\/th>\\n                                            <th style=\\"{$style.th}\\">\\n                                                {$total.cart_count} {\'ms2_frontend_count_unit\' | lexicon}\\n                                            <\\/th>\\n                                            <th style=\\"{$style.th}\\">\\n                                                {$total.cart_weight} {\'ms2_frontend_weight_unit\' | lexicon}\\n                                            <\\/th>\\n                                            <th style=\\"{$style.th}\\">\\n                                                {$total.cart_cost} {\'ms2_frontend_currency\' | lexicon}\\n                                            <\\/th>\\n                                        <\\/tr>\\n                                        <\\/tfoot>\\n                                    <\\/table>\\n                                    <h3 style=\\"{$style.h}{$style.h3}\\">\\n                                        {\'ms2_frontend_order_cost\' | lexicon}:\\n                                        {if $total.delivery_cost}\\n                                            {$total.cart_cost} {\'ms2_frontend_currency\' | lexicon} + {$total.delivery_cost}\\n                                            {\'ms2_frontend_currency\' | lexicon} =\\n                                        {\\/if}\\n                                        <strong>{$total.cost}<\\/strong> {\'ms2_frontend_currency\' | lexicon}\\n                                    <\\/h3>\\n                                {\\/block}\\n                            <\\/td>\\n                        <\\/tr>\\n                    <\\/table>\\n                <\\/div>\\n                <!-- \\/content -->\\n            <\\/td>\\n            <td><\\/td>\\n        <\\/tr>\\n    <\\/table>\\n    <!-- \\/body -->\\n    <!-- footer -->\\n    <table style=\\"clear:both !important;width: 100%;\\">\\n        <tr>\\n            <td><\\/td>\\n            <td class=\\"container\\">\\n                <!-- content -->\\n                <div class=\\"content\\">\\n                    <table style=\\"width:100%;text-align: center;\\">\\n                        <tr>\\n                            <td align=\\"center\\">\\n                                <p style=\\"{$style.p}\\">\\n                                    {block \'footer\'}\\n                                    <a href=\\"{$site_url}\\" style=\\"color: #999999;\\">\\n                                        {\'site_name\' | option}\\n                                    <\\/a>\\n                                    {\\/block}\\n                                <\\/p>\\n                            <\\/td>\\n                        <\\/tr>\\n                    <\\/table>\\n                <\\/div>\\n                <!-- \\/content -->\\n            <\\/td>\\n            <td><\\/td>\\n        <\\/tr>\\n    <\\/table>\\n    <!-- \\/footer -->\\n<\\/div>\\n<\\/body>\\n<\\/html>"}',
        'guid' => '67ed6fbde95e3dc797f40a9f237fd80c',
        'native_key' => 0,
        'signature' => 'be427becc3f066943137fe294010dcc5',
      ),
      'c6d7546f38a8b6a70bf34df9a2db03b1' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.msEmail.new.user","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"{extends \'tpl.msEmail\'}\\n\\n{block \'title\'}\\n    {\'ms2_email_subject_new_user\' | lexicon : $order}\\n{\\/block}\\n\\n{block \'products\'}\\n    {parent}\\n    {if $payment_link?}\\n        <p style=\\"margin-left:20px;{$style.p}\\">\\n            {\'ms2_payment_link\' | lexicon : [\'link\' => $payment_link]}\\n        <\\/p>\\n    {\\/if}\\n{\\/block}","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/chunks\\/chunk.ms_email_new_user.tpl","content":"{extends \'tpl.msEmail\'}\\n\\n{block \'title\'}\\n    {\'ms2_email_subject_new_user\' | lexicon : $order}\\n{\\/block}\\n\\n{block \'products\'}\\n    {parent}\\n    {if $payment_link?}\\n        <p style=\\"margin-left:20px;{$style.p}\\">\\n            {\'ms2_payment_link\' | lexicon : [\'link\' => $payment_link]}\\n        <\\/p>\\n    {\\/if}\\n{\\/block}"}',
        'guid' => '8836f3a836a8b093459963c15351cc74',
        'native_key' => 0,
        'signature' => '723900ebd1e690d37878bc2a91fed39b',
      ),
      '54c3e68472f95a707b5473e948b8b3dc' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.msEmail.new.manager","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"{extends \'tpl.msEmail\'}\\n\\n{block \'title\'}\\n    {\'ms2_email_subject_new_manager\' | lexicon : $order}\\n{\\/block}","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/chunks\\/chunk.ms_email_new_manager.tpl","content":"{extends \'tpl.msEmail\'}\\n\\n{block \'title\'}\\n    {\'ms2_email_subject_new_manager\' | lexicon : $order}\\n{\\/block}"}',
        'guid' => '5df455bd3407c414f7de618536c0bf99',
        'native_key' => 0,
        'signature' => '8162b41cb3312334fb81c42de32c6773',
      ),
      '134a7ce35d9892adf4d3afa7496999a3' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.msEmail.paid.user","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"{extends \'tpl.msEmail\'}\\n\\n{block \'title\'}\\n    {\'ms2_email_subject_paid_user\' | lexicon : $order}\\n{\\/block}","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/chunks\\/chunk.ms_email_paid_user.tpl","content":"{extends \'tpl.msEmail\'}\\n\\n{block \'title\'}\\n    {\'ms2_email_subject_paid_user\' | lexicon : $order}\\n{\\/block}"}',
        'guid' => 'c28d7ce6259d57d8078b094d37763c37',
        'native_key' => 0,
        'signature' => '6d2c1c6bcab96a6b97ad229b99247bff',
      ),
      '87ff876ce4c1e581dc622f1f82cff703' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.msEmail.paid.manager","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"{extends \'tpl.msEmail\'}\\n\\n{block \'title\'}\\n    {\'ms2_email_subject_paid_manager\' | lexicon : $order}\\n{\\/block}","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/chunks\\/chunk.ms_email_paid_manager.tpl","content":"{extends \'tpl.msEmail\'}\\n\\n{block \'title\'}\\n    {\'ms2_email_subject_paid_manager\' | lexicon : $order}\\n{\\/block}"}',
        'guid' => '42ac5d78afd6432f319090c49069a0d5',
        'native_key' => 0,
        'signature' => '2f5618c955d1a7f7a49714a59d1e184f',
      ),
      '4b79d1263400b449dda71f1d0dfd8b0b' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.msEmail.sent.user","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"{extends \'tpl.msEmail\'}\\n\\n{block \'title\'}\\n    {\'ms2_email_subject_sent_user\' | lexicon : $order}\\n{\\/block}","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/chunks\\/chunk.ms_email_sent_user.tpl","content":"{extends \'tpl.msEmail\'}\\n\\n{block \'title\'}\\n    {\'ms2_email_subject_sent_user\' | lexicon : $order}\\n{\\/block}"}',
        'guid' => '357b5b498d16fd0086b4576a8d39ba32',
        'native_key' => 0,
        'signature' => 'e39f242ee924d1c02ec5045b39988bac',
      ),
      'e8cf40f84c81835aa7316c8f88b9ba9e' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.msEmail.cancelled.user","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"{extends \'tpl.msEmail\'}\\n\\n{block \'title\'}\\n    {\'ms2_email_subject_cancelled_user\' | lexicon : $order}\\n{\\/block}","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/chunks\\/chunk.ms_email_cancelled_user.tpl","content":"{extends \'tpl.msEmail\'}\\n\\n{block \'title\'}\\n    {\'ms2_email_subject_cancelled_user\' | lexicon : $order}\\n{\\/block}"}',
        'guid' => 'd311646257cd763612259cb39c0cad0d',
        'native_key' => 0,
        'signature' => '94ad03dd39d113bef0569fd3799bffee',
      ),
    ),
    'Snippets' => 
    array (
      'e2f497c5f014a7aa1969eeb8ce4baa51' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modSnippet',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"msProducts","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"\\/** @var modX $modx *\\/\\n\\/** @var array $scriptProperties *\\/\\n\\/** @var miniShop2 $miniShop2 *\\/\\n$miniShop2 = $modx->getService(\'miniShop2\');\\n$miniShop2->initialize($modx->context->key);\\n\\/** @var pdoFetch $pdoFetch *\\/\\n$pdoFetch = $modx->getService(\'pdoFetch\');\\n$pdoFetch->setConfig($scriptProperties);\\n$pdoFetch->addTime(\'pdoTools loaded.\');\\n\\nif (isset($parents) && $parents === \'\') {\\n    $scriptProperties[\'parents\'] = $modx->resource->id;\\n}\\n\\n\\/\\/ Start build \\"where\\" expression\\n$where = array(\\n    \'class_key\' => \'msProduct\',\\n);\\nif (empty($showZeroPrice)) {\\n    $where[\'Data.price:>\'] = 0;\\n}\\n\\/\\/ Add grouping\\n$groupby = array(\\n    \'msProduct.id\',\\n);\\n\\n\\/\\/ Join tables\\n$leftJoin = array(\\n    \'Data\' => array(\'class\' => \'msProductData\'),\\n    \'Vendor\' => array(\'class\' => \'msVendor\', \'on\' => \'Data.vendor=Vendor.id\'),\\n);\\n\\n$select = array(\\n    \'msProduct\' => !empty($includeContent)\\n        ? $modx->getSelectColumns(\'msProduct\', \'msProduct\')\\n        : $modx->getSelectColumns(\'msProduct\', \'msProduct\', \'\', array(\'content\'), true),\\n    \'Data\' => $modx->getSelectColumns(\'msProductData\', \'Data\', \'\', array(\'id\'), true),\\n    \'Vendor\' => $modx->getSelectColumns(\'msVendor\', \'Vendor\', \'vendor.\', array(\'id\'), true),\\n);\\n\\n\\/\\/ Include thumbnails\\nif (!empty($includeThumbs)) {\\n    $thumbs = array_map(\'trim\', explode(\',\', $includeThumbs));\\n    foreach ($thumbs as $thumb) {\\n        if (empty($thumb)) {\\n            continue;\\n        }\\n        $leftJoin[$thumb] = array(\\n            \'class\' => \'msProductFile\',\\n            \'on\' => \\"`{$thumb}`.product_id = msProduct.id AND `{$thumb}`.rank = 0 AND `{$thumb}`.path LIKE \'%\\/{$thumb}\\/%\'\\",\\n        );\\n        $select[$thumb] = \\"`{$thumb}`.url as `{$thumb}`\\";\\n        $groupby[] = \\"`{$thumb}`.url\\";\\n    }\\n}\\n\\n\\/\\/ Include linked products\\n$innerJoin = array();\\nif (!empty($link) && !empty($master)) {\\n    $innerJoin[\'Link\'] = array(\\n        \'class\' => \'msProductLink\',\\n        \'on\' => \'msProduct.id = Link.slave AND Link.link = \' . $link,\\n    );\\n    $where[\'Link.master\'] = $master;\\n} elseif (!empty($link) && !empty($slave)) {\\n    $innerJoin[\'Link\'] = array(\\n        \'class\' => \'msProductLink\',\\n        \'on\' => \'msProduct.id = Link.master AND Link.link = \' . $link,\\n    );\\n    $where[\'Link.slave\'] = $slave;\\n}\\n\\n\\/\\/ Add user parameters\\nforeach (array(\'where\', \'leftJoin\', \'innerJoin\', \'select\', \'groupby\') as $v) {\\n    if (!empty($scriptProperties[$v])) {\\n        $tmp = $scriptProperties[$v];\\n        if (!is_array($tmp)) {\\n            $tmp = json_decode($tmp, true);\\n        }\\n        if (is_array($tmp)) {\\n            $$v = array_merge($$v, $tmp);\\n        }\\n    }\\n    unset($scriptProperties[$v]);\\n}\\n$pdoFetch->addTime(\'Conditions prepared\');\\n\\n\\/\\/ Add filters by options\\n$joinedOptions = array();\\nif (!empty($scriptProperties[\'optionFilters\'])) {\\n    $filters = json_decode($scriptProperties[\'optionFilters\'], true);\\n    foreach ($filters as $key => $value) {\\n        $option = preg_replace(\'#\\\\:.*#\', \'\', $key);\\n        $key = str_replace($option, $option . \'.value\', $key);\\n        if (!in_array($option, $joinedOptions)) {\\n            $leftJoin[$option] = array(\\n                \'class\' => \'msProductOption\',\\n                \'on\' => \\"`{$option}`.product_id = Data.id AND `{$option}`.key = \'{$option}\'\\",\\n            );\\n            $joinedOptions[] = $option;\\n            $where[$key] = $value;\\n        }\\n    }\\n}\\n\\n\\/\\/ Add sort by options\\nif (!empty($scriptProperties[\'sortbyOptions\'])) {\\n    $sorts = array_map(\'trim\', explode(\',\', $scriptProperties[\'sortbyOptions\']));\\n    foreach ($sorts as $sort) {\\n        $sort = explode(\':\', $sort);\\n        $option = $sort[0];\\n        if (preg_match(\\"#\\\\b{$option}\\\\b#\\", $scriptProperties[\'sortby\'], $matches)) {\\n            $type = \'string\';\\n            if (isset($sort[1])) {\\n                $type = $sort[1];\\n            }\\n            switch ($type) {\\n                case \'number\':\\n                case \'decimal\':\\n                    $sortbyOptions = \\"CAST(`{$option}`.`value` AS DECIMAL(13,3))\\";\\n                    break;\\n                case \'int\':\\n                case \'integer\':\\n                    $sortbyOptions = \\"CAST(`{$option}`.`value` AS UNSIGNED INTEGER)\\";\\n                    break;\\n                case \'date\':\\n                case \'datetime\':\\n                    $sortbyOptions = \\"CAST(`{$option}`.`value` AS DATETIME)\\";\\n                    break;\\n                default:\\n                    $sortbyOptions = \\"`{$option}`.`value`\\";\\n                    break;\\n            }\\n            $scriptProperties[\'sortby\'] = preg_replace($matches[0], $sortbyOptions, $scriptProperties[\'sortby\']);\\n            $groupby[] = \\"`{$option}`.value\\";\\n        }\\n        print_r($scriptProperties[\'sortby\']);\\n\\n        if (!in_array($option, $joinedOptions)) {\\n            $leftJoin[$option] = array(\\n                \'class\' => \'msProductOption\',\\n                \'on\' => \\"`{$option}`.product_id = Data.id AND `{$option}`.key = \'{$option}\'\\",\\n            );\\n            $joinedOptions[] = $option;\\n        }\\n\\n    }\\n}\\n\\n$default = array(\\n    \'class\' => \'msProduct\',\\n    \'where\' => $where,\\n    \'leftJoin\' => $leftJoin,\\n    \'innerJoin\' => $innerJoin,\\n    \'select\' => $select,\\n    \'sortby\' => \'msProduct.id\',\\n    \'sortdir\' => \'ASC\',\\n    \'groupby\' => implode(\', \', $groupby),\\n    \'return\' => !empty($returnIds)\\n        ? \'ids\'\\n        : \'data\',\\n    \'nestedChunkPrefix\' => \'minishop2_\',\\n);\\n\\/\\/ Merge all properties and run!\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties), false);\\n$rows = $pdoFetch->run();\\n\\n\\/\\/ Process rows\\n$output = array();\\nif (!empty($rows) && is_array($rows)) {\\n    $c = $modx->newQuery(\'modPluginEvent\', array(\'event:IN\' => array(\'msOnGetProductPrice\', \'msOnGetProductWeight\')));\\n    $c->innerJoin(\'modPlugin\', \'modPlugin\', \'modPlugin.id = modPluginEvent.pluginid\');\\n    $c->where(\'modPlugin.disabled = 0\');\\n\\n    $modifications = $modx->getOption(\'ms2_price_snippet\', null, false, true) ||\\n        $modx->getOption(\'ms2_weight_snippet\', null, false, true) || $modx->getCount(\'modPluginEvent\', $c);\\n    if ($modifications) {\\n        \\/** @var msProductData $product *\\/\\n        $product = $modx->newObject(\'msProductData\');\\n    }\\n    $pdoFetch->addTime(\'Checked the active modifiers\');\\n\\n    $opt_time = 0;\\n    foreach ($rows as $k => $row) {\\n        if ($modifications) {\\n            $product->fromArray($row, \'\', true, true);\\n            $tmp = $row[\'price\'];\\n            $row[\'price\'] = $product->getPrice($row);\\n            $row[\'weight\'] = $product->getWeight($row);\\n            if ($row[\'price\'] != $tmp) {\\n                $row[\'old_price\'] = $tmp;\\n            }\\n        }\\n        $row[\'price\'] = $miniShop2->formatPrice($row[\'price\']);\\n        $row[\'old_price\'] = $miniShop2->formatPrice($row[\'old_price\']);\\n        $row[\'weight\'] = $miniShop2->formatWeight($row[\'weight\']);\\n        $row[\'idx\'] = $pdoFetch->idx++;\\n\\n        $opt_time_start = microtime(true);\\n        $options = $modx->call(\'msProductData\', \'loadOptions\', array(&$modx, $row[\'id\']));\\n        $row = array_merge($row, $options);\\n        $opt_time += microtime(true) - $opt_time_start;\\n\\n        $tpl = $pdoFetch->defineChunk($row);\\n        $output[] = $pdoFetch->getChunk($tpl, $row);\\n    }\\n    $pdoFetch->addTime(\'Time to load products options\', $opt_time);\\n}\\n\\n$log = \'\';\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\n    $log .= \'<pre class=\\"msProductsLog\\">\' . print_r($pdoFetch->getTime(), 1) . \'<\\/pre>\';\\n}\\n\\n\\/\\/ Return output\\nif (!empty($returnIds) && is_string($rows)) {\\n    $modx->setPlaceholder(\'msProducts.log\', $log);\\n    if (!empty($toPlaceholder)) {\\n        $modx->setPlaceholder($toPlaceholder, $rows);\\n    } else {\\n        return $rows;\\n    }\\n} elseif (!empty($toSeparatePlaceholders)) {\\n    $output[\'log\'] = $log;\\n    $modx->setPlaceholders($output, $toSeparatePlaceholders);\\n} else {\\n    if (empty($outputSeparator)) {\\n        $outputSeparator = \\"\\\\n\\";\\n    }\\n    $output[\'log\'] = $log;\\n    $output = implode($outputSeparator, $output);\\n\\n    if (!empty($tplWrapper) && (!empty($wrapIfEmpty) || !empty($output))) {\\n        $output = $pdoFetch->getChunk($tplWrapper, array(\\n            \'output\' => $output,\\n        ));\\n    }\\n\\n    if (!empty($toPlaceholder)) {\\n        $modx->setPlaceholder($toPlaceholder, $output);\\n    } else {\\n        return $output;\\n    }\\n}","locked":0,"properties":"a:28:{s:3:\\"tpl\\";a:7:{s:4:\\"name\\";s:3:\\"tpl\\";s:4:\\"desc\\";s:12:\\"ms2_prop_tpl\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:18:\\"tpl.msProducts.row\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"limit\\";a:7:{s:4:\\"name\\";s:5:\\"limit\\";s:4:\\"desc\\";s:14:\\"ms2_prop_limit\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:10;s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"offset\\";a:7:{s:4:\\"name\\";s:6:\\"offset\\";s:4:\\"desc\\";s:15:\\"ms2_prop_offset\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:0;s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"depth\\";a:7:{s:4:\\"name\\";s:5:\\"depth\\";s:4:\\"desc\\";s:14:\\"ms2_prop_depth\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:10;s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"sortby\\";a:7:{s:4:\\"name\\";s:6:\\"sortby\\";s:4:\\"desc\\";s:15:\\"ms2_prop_sortby\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:2:\\"id\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"sortbyOptions\\";a:7:{s:4:\\"name\\";s:13:\\"sortbyOptions\\";s:4:\\"desc\\";s:22:\\"ms2_prop_sortbyOptions\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"sortdir\\";a:7:{s:4:\\"name\\";s:7:\\"sortdir\\";s:4:\\"desc\\";s:16:\\"ms2_prop_sortdir\\";s:4:\\"type\\";s:4:\\"list\\";s:7:\\"options\\";a:2:{i:0;a:2:{s:4:\\"text\\";s:3:\\"ASC\\";s:5:\\"value\\";s:3:\\"ASC\\";}i:1;a:2:{s:4:\\"text\\";s:4:\\"DESC\\";s:5:\\"value\\";s:4:\\"DESC\\";}}s:5:\\"value\\";s:3:\\"ASC\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"toPlaceholder\\";a:7:{s:4:\\"name\\";s:13:\\"toPlaceholder\\";s:4:\\"desc\\";s:22:\\"ms2_prop_toPlaceholder\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:22:\\"toSeparatePlaceholders\\";a:7:{s:4:\\"name\\";s:22:\\"toSeparatePlaceholders\\";s:4:\\"desc\\";s:31:\\"ms2_prop_toSeparatePlaceholders\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"showLog\\";a:7:{s:4:\\"name\\";s:7:\\"showLog\\";s:4:\\"desc\\";s:16:\\"ms2_prop_showLog\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"parents\\";a:7:{s:4:\\"name\\";s:7:\\"parents\\";s:4:\\"desc\\";s:16:\\"ms2_prop_parents\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"resources\\";a:7:{s:4:\\"name\\";s:9:\\"resources\\";s:4:\\"desc\\";s:18:\\"ms2_prop_resources\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:14:\\"includeContent\\";a:7:{s:4:\\"name\\";s:14:\\"includeContent\\";s:4:\\"desc\\";s:23:\\"ms2_prop_includeContent\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"includeTVs\\";a:7:{s:4:\\"name\\";s:10:\\"includeTVs\\";s:4:\\"desc\\";s:19:\\"ms2_prop_includeTVs\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"includeThumbs\\";a:7:{s:4:\\"name\\";s:13:\\"includeThumbs\\";s:4:\\"desc\\";s:22:\\"ms2_prop_includeThumbs\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"optionFilters\\";a:7:{s:4:\\"name\\";s:13:\\"optionFilters\\";s:4:\\"desc\\";s:22:\\"ms2_prop_optionFilters\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"where\\";a:7:{s:4:\\"name\\";s:5:\\"where\\";s:4:\\"desc\\";s:14:\\"ms2_prop_where\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:4:\\"link\\";a:7:{s:4:\\"name\\";s:4:\\"link\\";s:4:\\"desc\\";s:13:\\"ms2_prop_link\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"master\\";a:7:{s:4:\\"name\\";s:6:\\"master\\";s:4:\\"desc\\";s:15:\\"ms2_prop_master\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"slave\\";a:7:{s:4:\\"name\\";s:5:\\"slave\\";s:4:\\"desc\\";s:14:\\"ms2_prop_slave\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"tvPrefix\\";a:7:{s:4:\\"name\\";s:8:\\"tvPrefix\\";s:4:\\"desc\\";s:17:\\"ms2_prop_tvPrefix\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"outputSeparator\\";a:7:{s:4:\\"name\\";s:15:\\"outputSeparator\\";s:4:\\"desc\\";s:24:\\"ms2_prop_outputSeparator\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:1:\\"\\n\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"returnIds\\";a:7:{s:4:\\"name\\";s:9:\\"returnIds\\";s:4:\\"desc\\";s:18:\\"ms2_prop_returnIds\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"showUnpublished\\";a:7:{s:4:\\"name\\";s:15:\\"showUnpublished\\";s:4:\\"desc\\";s:24:\\"ms2_prop_showUnpublished\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"showDeleted\\";a:7:{s:4:\\"name\\";s:11:\\"showDeleted\\";s:4:\\"desc\\";s:20:\\"ms2_prop_showDeleted\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"showHidden\\";a:7:{s:4:\\"name\\";s:10:\\"showHidden\\";s:4:\\"desc\\";s:19:\\"ms2_prop_showHidden\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"showZeroPrice\\";a:7:{s:4:\\"name\\";s:13:\\"showZeroPrice\\";s:4:\\"desc\\";s:22:\\"ms2_prop_showZeroPrice\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"wrapIfEmpty\\";a:7:{s:4:\\"name\\";s:11:\\"wrapIfEmpty\\";s:4:\\"desc\\";s:20:\\"ms2_prop_wrapIfEmpty\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/snippets\\/snippet.ms_products.php","content":"\\/** @var modX $modx *\\/\\n\\/** @var array $scriptProperties *\\/\\n\\/** @var miniShop2 $miniShop2 *\\/\\n$miniShop2 = $modx->getService(\'miniShop2\');\\n$miniShop2->initialize($modx->context->key);\\n\\/** @var pdoFetch $pdoFetch *\\/\\n$pdoFetch = $modx->getService(\'pdoFetch\');\\n$pdoFetch->setConfig($scriptProperties);\\n$pdoFetch->addTime(\'pdoTools loaded.\');\\n\\nif (isset($parents) && $parents === \'\') {\\n    $scriptProperties[\'parents\'] = $modx->resource->id;\\n}\\n\\n\\/\\/ Start build \\"where\\" expression\\n$where = array(\\n    \'class_key\' => \'msProduct\',\\n);\\nif (empty($showZeroPrice)) {\\n    $where[\'Data.price:>\'] = 0;\\n}\\n\\/\\/ Add grouping\\n$groupby = array(\\n    \'msProduct.id\',\\n);\\n\\n\\/\\/ Join tables\\n$leftJoin = array(\\n    \'Data\' => array(\'class\' => \'msProductData\'),\\n    \'Vendor\' => array(\'class\' => \'msVendor\', \'on\' => \'Data.vendor=Vendor.id\'),\\n);\\n\\n$select = array(\\n    \'msProduct\' => !empty($includeContent)\\n        ? $modx->getSelectColumns(\'msProduct\', \'msProduct\')\\n        : $modx->getSelectColumns(\'msProduct\', \'msProduct\', \'\', array(\'content\'), true),\\n    \'Data\' => $modx->getSelectColumns(\'msProductData\', \'Data\', \'\', array(\'id\'), true),\\n    \'Vendor\' => $modx->getSelectColumns(\'msVendor\', \'Vendor\', \'vendor.\', array(\'id\'), true),\\n);\\n\\n\\/\\/ Include thumbnails\\nif (!empty($includeThumbs)) {\\n    $thumbs = array_map(\'trim\', explode(\',\', $includeThumbs));\\n    foreach ($thumbs as $thumb) {\\n        if (empty($thumb)) {\\n            continue;\\n        }\\n        $leftJoin[$thumb] = array(\\n            \'class\' => \'msProductFile\',\\n            \'on\' => \\"`{$thumb}`.product_id = msProduct.id AND `{$thumb}`.rank = 0 AND `{$thumb}`.path LIKE \'%\\/{$thumb}\\/%\'\\",\\n        );\\n        $select[$thumb] = \\"`{$thumb}`.url as `{$thumb}`\\";\\n        $groupby[] = \\"`{$thumb}`.url\\";\\n    }\\n}\\n\\n\\/\\/ Include linked products\\n$innerJoin = array();\\nif (!empty($link) && !empty($master)) {\\n    $innerJoin[\'Link\'] = array(\\n        \'class\' => \'msProductLink\',\\n        \'on\' => \'msProduct.id = Link.slave AND Link.link = \' . $link,\\n    );\\n    $where[\'Link.master\'] = $master;\\n} elseif (!empty($link) && !empty($slave)) {\\n    $innerJoin[\'Link\'] = array(\\n        \'class\' => \'msProductLink\',\\n        \'on\' => \'msProduct.id = Link.master AND Link.link = \' . $link,\\n    );\\n    $where[\'Link.slave\'] = $slave;\\n}\\n\\n\\/\\/ Add user parameters\\nforeach (array(\'where\', \'leftJoin\', \'innerJoin\', \'select\', \'groupby\') as $v) {\\n    if (!empty($scriptProperties[$v])) {\\n        $tmp = $scriptProperties[$v];\\n        if (!is_array($tmp)) {\\n            $tmp = json_decode($tmp, true);\\n        }\\n        if (is_array($tmp)) {\\n            $$v = array_merge($$v, $tmp);\\n        }\\n    }\\n    unset($scriptProperties[$v]);\\n}\\n$pdoFetch->addTime(\'Conditions prepared\');\\n\\n\\/\\/ Add filters by options\\n$joinedOptions = array();\\nif (!empty($scriptProperties[\'optionFilters\'])) {\\n    $filters = json_decode($scriptProperties[\'optionFilters\'], true);\\n    foreach ($filters as $key => $value) {\\n        $option = preg_replace(\'#\\\\:.*#\', \'\', $key);\\n        $key = str_replace($option, $option . \'.value\', $key);\\n        if (!in_array($option, $joinedOptions)) {\\n            $leftJoin[$option] = array(\\n                \'class\' => \'msProductOption\',\\n                \'on\' => \\"`{$option}`.product_id = Data.id AND `{$option}`.key = \'{$option}\'\\",\\n            );\\n            $joinedOptions[] = $option;\\n            $where[$key] = $value;\\n        }\\n    }\\n}\\n\\n\\/\\/ Add sort by options\\nif (!empty($scriptProperties[\'sortbyOptions\'])) {\\n    $sorts = array_map(\'trim\', explode(\',\', $scriptProperties[\'sortbyOptions\']));\\n    foreach ($sorts as $sort) {\\n        $sort = explode(\':\', $sort);\\n        $option = $sort[0];\\n        if (preg_match(\\"#\\\\b{$option}\\\\b#\\", $scriptProperties[\'sortby\'], $matches)) {\\n            $type = \'string\';\\n            if (isset($sort[1])) {\\n                $type = $sort[1];\\n            }\\n            switch ($type) {\\n                case \'number\':\\n                case \'decimal\':\\n                    $sortbyOptions = \\"CAST(`{$option}`.`value` AS DECIMAL(13,3))\\";\\n                    break;\\n                case \'int\':\\n                case \'integer\':\\n                    $sortbyOptions = \\"CAST(`{$option}`.`value` AS UNSIGNED INTEGER)\\";\\n                    break;\\n                case \'date\':\\n                case \'datetime\':\\n                    $sortbyOptions = \\"CAST(`{$option}`.`value` AS DATETIME)\\";\\n                    break;\\n                default:\\n                    $sortbyOptions = \\"`{$option}`.`value`\\";\\n                    break;\\n            }\\n            $scriptProperties[\'sortby\'] = preg_replace($matches[0], $sortbyOptions, $scriptProperties[\'sortby\']);\\n            $groupby[] = \\"`{$option}`.value\\";\\n        }\\n        print_r($scriptProperties[\'sortby\']);\\n\\n        if (!in_array($option, $joinedOptions)) {\\n            $leftJoin[$option] = array(\\n                \'class\' => \'msProductOption\',\\n                \'on\' => \\"`{$option}`.product_id = Data.id AND `{$option}`.key = \'{$option}\'\\",\\n            );\\n            $joinedOptions[] = $option;\\n        }\\n\\n    }\\n}\\n\\n$default = array(\\n    \'class\' => \'msProduct\',\\n    \'where\' => $where,\\n    \'leftJoin\' => $leftJoin,\\n    \'innerJoin\' => $innerJoin,\\n    \'select\' => $select,\\n    \'sortby\' => \'msProduct.id\',\\n    \'sortdir\' => \'ASC\',\\n    \'groupby\' => implode(\', \', $groupby),\\n    \'return\' => !empty($returnIds)\\n        ? \'ids\'\\n        : \'data\',\\n    \'nestedChunkPrefix\' => \'minishop2_\',\\n);\\n\\/\\/ Merge all properties and run!\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties), false);\\n$rows = $pdoFetch->run();\\n\\n\\/\\/ Process rows\\n$output = array();\\nif (!empty($rows) && is_array($rows)) {\\n    $c = $modx->newQuery(\'modPluginEvent\', array(\'event:IN\' => array(\'msOnGetProductPrice\', \'msOnGetProductWeight\')));\\n    $c->innerJoin(\'modPlugin\', \'modPlugin\', \'modPlugin.id = modPluginEvent.pluginid\');\\n    $c->where(\'modPlugin.disabled = 0\');\\n\\n    $modifications = $modx->getOption(\'ms2_price_snippet\', null, false, true) ||\\n        $modx->getOption(\'ms2_weight_snippet\', null, false, true) || $modx->getCount(\'modPluginEvent\', $c);\\n    if ($modifications) {\\n        \\/** @var msProductData $product *\\/\\n        $product = $modx->newObject(\'msProductData\');\\n    }\\n    $pdoFetch->addTime(\'Checked the active modifiers\');\\n\\n    $opt_time = 0;\\n    foreach ($rows as $k => $row) {\\n        if ($modifications) {\\n            $product->fromArray($row, \'\', true, true);\\n            $tmp = $row[\'price\'];\\n            $row[\'price\'] = $product->getPrice($row);\\n            $row[\'weight\'] = $product->getWeight($row);\\n            if ($row[\'price\'] != $tmp) {\\n                $row[\'old_price\'] = $tmp;\\n            }\\n        }\\n        $row[\'price\'] = $miniShop2->formatPrice($row[\'price\']);\\n        $row[\'old_price\'] = $miniShop2->formatPrice($row[\'old_price\']);\\n        $row[\'weight\'] = $miniShop2->formatWeight($row[\'weight\']);\\n        $row[\'idx\'] = $pdoFetch->idx++;\\n\\n        $opt_time_start = microtime(true);\\n        $options = $modx->call(\'msProductData\', \'loadOptions\', array(&$modx, $row[\'id\']));\\n        $row = array_merge($row, $options);\\n        $opt_time += microtime(true) - $opt_time_start;\\n\\n        $tpl = $pdoFetch->defineChunk($row);\\n        $output[] = $pdoFetch->getChunk($tpl, $row);\\n    }\\n    $pdoFetch->addTime(\'Time to load products options\', $opt_time);\\n}\\n\\n$log = \'\';\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\n    $log .= \'<pre class=\\"msProductsLog\\">\' . print_r($pdoFetch->getTime(), 1) . \'<\\/pre>\';\\n}\\n\\n\\/\\/ Return output\\nif (!empty($returnIds) && is_string($rows)) {\\n    $modx->setPlaceholder(\'msProducts.log\', $log);\\n    if (!empty($toPlaceholder)) {\\n        $modx->setPlaceholder($toPlaceholder, $rows);\\n    } else {\\n        return $rows;\\n    }\\n} elseif (!empty($toSeparatePlaceholders)) {\\n    $output[\'log\'] = $log;\\n    $modx->setPlaceholders($output, $toSeparatePlaceholders);\\n} else {\\n    if (empty($outputSeparator)) {\\n        $outputSeparator = \\"\\\\n\\";\\n    }\\n    $output[\'log\'] = $log;\\n    $output = implode($outputSeparator, $output);\\n\\n    if (!empty($tplWrapper) && (!empty($wrapIfEmpty) || !empty($output))) {\\n        $output = $pdoFetch->getChunk($tplWrapper, array(\\n            \'output\' => $output,\\n        ));\\n    }\\n\\n    if (!empty($toPlaceholder)) {\\n        $modx->setPlaceholder($toPlaceholder, $output);\\n    } else {\\n        return $output;\\n    }\\n}"}',
        'guid' => '979615c46079d1e703a6437b4615ae8b',
        'native_key' => 0,
        'signature' => 'deb4e51f656c4a4954cd91cbfb7d9339',
      ),
      'af65fb42fafaf2dd54201b6ecf137352' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modSnippet',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"msCart","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"\\/** @var modX $modx *\\/\\n\\/** @var array $scriptProperties *\\/\\n\\/** @var miniShop2 $miniShop2 *\\/\\n$miniShop2 = $modx->getService(\'miniShop2\');\\n$miniShop2->initialize($modx->context->key);\\n\\/** @var pdoFetch $pdoFetch *\\/\\n$pdoFetch = $modx->getService(\'pdoFetch\');\\n$pdoFetch->setConfig($scriptProperties);\\n$pdoFetch->addTime(\'pdoTools loaded.\');\\n\\n$tpl = $modx->getOption(\'tpl\', $scriptProperties, \'tpl.msCart\');\\n$cart = $miniShop2->cart->get();\\n$status = $miniShop2->cart->status();\\n\\n\\/\\/ Do not show empty cart when displaying order details\\nif (!empty($_GET[\'msorder\'])) {\\n    return \'\';\\n} elseif (empty($status[\'total_count\'])) {\\n    return $pdoFetch->getChunk($tpl);\\n}\\n\\n\\/\\/ Select cart products\\n$where = array(\\n    \'msProduct.id:IN\' => array(),\\n);\\nforeach ($cart as $entry) {\\n    $where[\'msProduct.id:IN\'][] = $entry[\'id\'];\\n}\\n$where[\'msProduct.id:IN\'] = array_unique($where[\'msProduct.id:IN\']);\\n\\n\\/\\/ Include products properties\\n$leftJoin = array(\\n    \'Data\' => array(\\n        \'class\' => \'msProductData\',\\n    ),\\n    \'Vendor\' => array(\\n        \'class\' => \'msVendor\',\\n        \'on\' => \'Data.vendor = Vendor.id\',\\n    ),\\n);\\n\\n\\/\\/ Select columns\\n$select = array(\\n    \'msProduct\' => !empty($includeContent)\\n        ? $modx->getSelectColumns(\'msProduct\', \'msProduct\')\\n        : $modx->getSelectColumns(\'msProduct\', \'msProduct\', \'\', array(\'content\'), true),\\n    \'Data\' => $modx->getSelectColumns(\'msProductData\', \'Data\', \'\', array(\'id\'), true),\\n    \'Vendor\' => $modx->getSelectColumns(\'msVendor\', \'Vendor\', \'vendor.\', array(\'id\'), true),\\n);\\n\\n\\/\\/ Include products thumbnails\\nif (!empty($includeThumbs)) {\\n    $thumbs = array_map(\'trim\', explode(\',\', $includeThumbs));\\n    if (!empty($thumbs[0])) {\\n        foreach ($thumbs as $thumb) {\\n            $leftJoin[$thumb] = array(\\n                \'class\' => \'msProductFile\',\\n                \'on\' => \\"`{$thumb}`.product_id = msProduct.id AND `{$thumb}`.parent != 0 AND `{$thumb}`.path LIKE \'%\\/{$thumb}\\/%\'\\",\\n            );\\n            $select[$thumb] = \\"`{$thumb}`.url as \'{$thumb}\'\\";\\n        }\\n        $pdoFetch->addTime(\'Included list of thumbnails: <b>\' . implode(\', \', $thumbs) . \'<\\/b>.\');\\n    }\\n}\\n\\n\\/\\/ Add user parameters\\nforeach (array(\'where\', \'leftJoin\', \'select\') as $v) {\\n    if (!empty($scriptProperties[$v])) {\\n        $tmp = $scriptProperties[$v];\\n        if (!is_array($tmp)) {\\n            $tmp = json_decode($tmp, true);\\n        }\\n        if (is_array($tmp)) {\\n            $$v = array_merge($$v, $tmp);\\n        }\\n    }\\n    unset($scriptProperties[$v]);\\n}\\n$pdoFetch->addTime(\'Conditions prepared\');\\n\\n$default = array(\\n    \'class\' => \'msProduct\',\\n    \'where\' => $where,\\n    \'leftJoin\' => $leftJoin,\\n    \'select\' => $select,\\n    \'sortby\' => \'msProduct.id\',\\n    \'sortdir\' => \'ASC\',\\n    \'groupby\' => \'msProduct.id\',\\n    \'limit\' => 0,\\n    \'return\' => \'data\',\\n    \'nestedChunkPrefix\' => \'minishop2_\',\\n);\\n\\/\\/ Merge all properties and run!\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties), false);\\n\\n$tmp = $pdoFetch->run();\\n$rows = array();\\nforeach ($tmp as $row) {\\n    $rows[$row[\'id\']] = $row;\\n}\\n\\n\\/\\/ Process products in cart\\n$products = array();\\n$total = array(\'count\' => 0, \'weight\' => 0, \'cost\' => 0);\\nforeach ($cart as $key => $entry) {\\n    if (!isset($rows[$entry[\'id\']])) {\\n        continue;\\n    }\\n    $product = $rows[$entry[\'id\']];\\n\\n    $product[\'key\'] = $key;\\n    $product[\'count\'] = $entry[\'count\'];\\n    $product[\'old_price\'] = $miniShop2->formatPrice(\\n        $product[\'price\'] != $entry[\'price\']\\n            ? $product[\'price\']\\n            : $product[\'old_price\']\\n    );\\n    $product[\'price\'] = $miniShop2->formatPrice($entry[\'price\']);\\n    $product[\'weight\'] = $miniShop2->formatWeight($entry[\'weight\']);\\n    $product[\'cost\'] = $miniShop2->formatPrice($entry[\'count\'] * $entry[\'price\']);\\n\\n    \\/\\/ Additional properties of product in cart\\n    if (!empty($entry[\'options\']) && is_array($entry[\'options\'])) {\\n        $product[\'options\'] = $entry[\'options\'];\\n        foreach ($entry[\'options\'] as $option => $value) {\\n            $product[\'option.\' . $option] = $value;\\n        }\\n    }\\n\\n    \\/\\/ Add option values\\n    $options = $modx->call(\'msProductData\', \'loadOptions\', array(&$modx, $product[\'id\']));\\n    $products[] = array_merge($product, $options);\\n\\n    \\/\\/ Count total\\n    $total[\'count\'] += $entry[\'count\'];\\n    $total[\'cost\'] += $entry[\'count\'] * $entry[\'price\'];\\n    $total[\'weight\'] += $entry[\'count\'] * $entry[\'weight\'];\\n}\\n$total[\'cost\'] = $miniShop2->formatPrice($total[\'cost\']);\\n$total[\'weight\'] = $miniShop2->formatWeight($total[\'weight\']);\\n\\n$output = $pdoFetch->getChunk($tpl, array(\\n    \'total\' => $total,\\n    \'products\' => $products,\\n));\\n\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\n    $output .= \'<pre class=\\"msCartLog\\">\' . print_r($pdoFetch->getTime(), true) . \'<\\/pre>\';\\n}\\n\\nif (!empty($toPlaceholder)) {\\n    $modx->setPlaceholder($toPlaceholder, $output);\\n} else {\\n    return $output;\\n}","locked":0,"properties":"a:5:{s:3:\\"tpl\\";a:7:{s:4:\\"name\\";s:3:\\"tpl\\";s:4:\\"desc\\";s:12:\\"ms2_prop_tpl\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:10:\\"tpl.msCart\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"includeTVs\\";a:7:{s:4:\\"name\\";s:10:\\"includeTVs\\";s:4:\\"desc\\";s:19:\\"ms2_prop_includeTVs\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"includeThumbs\\";a:7:{s:4:\\"name\\";s:13:\\"includeThumbs\\";s:4:\\"desc\\";s:22:\\"ms2_prop_includeThumbs\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"toPlaceholder\\";a:7:{s:4:\\"name\\";s:13:\\"toPlaceholder\\";s:4:\\"desc\\";s:22:\\"ms2_prop_toPlaceholder\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"showLog\\";a:7:{s:4:\\"name\\";s:7:\\"showLog\\";s:4:\\"desc\\";s:16:\\"ms2_prop_showLog\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/snippets\\/snippet.ms_cart.php","content":"\\/** @var modX $modx *\\/\\n\\/** @var array $scriptProperties *\\/\\n\\/** @var miniShop2 $miniShop2 *\\/\\n$miniShop2 = $modx->getService(\'miniShop2\');\\n$miniShop2->initialize($modx->context->key);\\n\\/** @var pdoFetch $pdoFetch *\\/\\n$pdoFetch = $modx->getService(\'pdoFetch\');\\n$pdoFetch->setConfig($scriptProperties);\\n$pdoFetch->addTime(\'pdoTools loaded.\');\\n\\n$tpl = $modx->getOption(\'tpl\', $scriptProperties, \'tpl.msCart\');\\n$cart = $miniShop2->cart->get();\\n$status = $miniShop2->cart->status();\\n\\n\\/\\/ Do not show empty cart when displaying order details\\nif (!empty($_GET[\'msorder\'])) {\\n    return \'\';\\n} elseif (empty($status[\'total_count\'])) {\\n    return $pdoFetch->getChunk($tpl);\\n}\\n\\n\\/\\/ Select cart products\\n$where = array(\\n    \'msProduct.id:IN\' => array(),\\n);\\nforeach ($cart as $entry) {\\n    $where[\'msProduct.id:IN\'][] = $entry[\'id\'];\\n}\\n$where[\'msProduct.id:IN\'] = array_unique($where[\'msProduct.id:IN\']);\\n\\n\\/\\/ Include products properties\\n$leftJoin = array(\\n    \'Data\' => array(\\n        \'class\' => \'msProductData\',\\n    ),\\n    \'Vendor\' => array(\\n        \'class\' => \'msVendor\',\\n        \'on\' => \'Data.vendor = Vendor.id\',\\n    ),\\n);\\n\\n\\/\\/ Select columns\\n$select = array(\\n    \'msProduct\' => !empty($includeContent)\\n        ? $modx->getSelectColumns(\'msProduct\', \'msProduct\')\\n        : $modx->getSelectColumns(\'msProduct\', \'msProduct\', \'\', array(\'content\'), true),\\n    \'Data\' => $modx->getSelectColumns(\'msProductData\', \'Data\', \'\', array(\'id\'), true),\\n    \'Vendor\' => $modx->getSelectColumns(\'msVendor\', \'Vendor\', \'vendor.\', array(\'id\'), true),\\n);\\n\\n\\/\\/ Include products thumbnails\\nif (!empty($includeThumbs)) {\\n    $thumbs = array_map(\'trim\', explode(\',\', $includeThumbs));\\n    if (!empty($thumbs[0])) {\\n        foreach ($thumbs as $thumb) {\\n            $leftJoin[$thumb] = array(\\n                \'class\' => \'msProductFile\',\\n                \'on\' => \\"`{$thumb}`.product_id = msProduct.id AND `{$thumb}`.parent != 0 AND `{$thumb}`.path LIKE \'%\\/{$thumb}\\/%\'\\",\\n            );\\n            $select[$thumb] = \\"`{$thumb}`.url as \'{$thumb}\'\\";\\n        }\\n        $pdoFetch->addTime(\'Included list of thumbnails: <b>\' . implode(\', \', $thumbs) . \'<\\/b>.\');\\n    }\\n}\\n\\n\\/\\/ Add user parameters\\nforeach (array(\'where\', \'leftJoin\', \'select\') as $v) {\\n    if (!empty($scriptProperties[$v])) {\\n        $tmp = $scriptProperties[$v];\\n        if (!is_array($tmp)) {\\n            $tmp = json_decode($tmp, true);\\n        }\\n        if (is_array($tmp)) {\\n            $$v = array_merge($$v, $tmp);\\n        }\\n    }\\n    unset($scriptProperties[$v]);\\n}\\n$pdoFetch->addTime(\'Conditions prepared\');\\n\\n$default = array(\\n    \'class\' => \'msProduct\',\\n    \'where\' => $where,\\n    \'leftJoin\' => $leftJoin,\\n    \'select\' => $select,\\n    \'sortby\' => \'msProduct.id\',\\n    \'sortdir\' => \'ASC\',\\n    \'groupby\' => \'msProduct.id\',\\n    \'limit\' => 0,\\n    \'return\' => \'data\',\\n    \'nestedChunkPrefix\' => \'minishop2_\',\\n);\\n\\/\\/ Merge all properties and run!\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties), false);\\n\\n$tmp = $pdoFetch->run();\\n$rows = array();\\nforeach ($tmp as $row) {\\n    $rows[$row[\'id\']] = $row;\\n}\\n\\n\\/\\/ Process products in cart\\n$products = array();\\n$total = array(\'count\' => 0, \'weight\' => 0, \'cost\' => 0);\\nforeach ($cart as $key => $entry) {\\n    if (!isset($rows[$entry[\'id\']])) {\\n        continue;\\n    }\\n    $product = $rows[$entry[\'id\']];\\n\\n    $product[\'key\'] = $key;\\n    $product[\'count\'] = $entry[\'count\'];\\n    $product[\'old_price\'] = $miniShop2->formatPrice(\\n        $product[\'price\'] != $entry[\'price\']\\n            ? $product[\'price\']\\n            : $product[\'old_price\']\\n    );\\n    $product[\'price\'] = $miniShop2->formatPrice($entry[\'price\']);\\n    $product[\'weight\'] = $miniShop2->formatWeight($entry[\'weight\']);\\n    $product[\'cost\'] = $miniShop2->formatPrice($entry[\'count\'] * $entry[\'price\']);\\n\\n    \\/\\/ Additional properties of product in cart\\n    if (!empty($entry[\'options\']) && is_array($entry[\'options\'])) {\\n        $product[\'options\'] = $entry[\'options\'];\\n        foreach ($entry[\'options\'] as $option => $value) {\\n            $product[\'option.\' . $option] = $value;\\n        }\\n    }\\n\\n    \\/\\/ Add option values\\n    $options = $modx->call(\'msProductData\', \'loadOptions\', array(&$modx, $product[\'id\']));\\n    $products[] = array_merge($product, $options);\\n\\n    \\/\\/ Count total\\n    $total[\'count\'] += $entry[\'count\'];\\n    $total[\'cost\'] += $entry[\'count\'] * $entry[\'price\'];\\n    $total[\'weight\'] += $entry[\'count\'] * $entry[\'weight\'];\\n}\\n$total[\'cost\'] = $miniShop2->formatPrice($total[\'cost\']);\\n$total[\'weight\'] = $miniShop2->formatWeight($total[\'weight\']);\\n\\n$output = $pdoFetch->getChunk($tpl, array(\\n    \'total\' => $total,\\n    \'products\' => $products,\\n));\\n\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\n    $output .= \'<pre class=\\"msCartLog\\">\' . print_r($pdoFetch->getTime(), true) . \'<\\/pre>\';\\n}\\n\\nif (!empty($toPlaceholder)) {\\n    $modx->setPlaceholder($toPlaceholder, $output);\\n} else {\\n    return $output;\\n}"}',
        'guid' => '6b3917fef5681df7ffdfa53c2b9ad3dc',
        'native_key' => 0,
        'signature' => '6f73d588e57c4eb69e4537acfb376d90',
      ),
      '8b1b7eedecab0b2c401cbc160d541d29' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modSnippet',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"msMiniCart","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"\\/** @var modX $modx *\\/\\n\\/** @var array $scriptProperties *\\/\\n\\/** @var miniShop2 $miniShop2 *\\/\\n$miniShop2 = $modx->getService(\'miniShop2\');\\n$miniShop2->initialize($modx->context->key);\\n\\n$tpl = $modx->getOption(\'tpl\', $scriptProperties, \'tpl.msMiniCart\');\\n\\n$cart = $miniShop2->cart->status();\\n$cart[\'total_cost\'] = $miniShop2->formatPrice($cart[\'total_cost\']);\\n$cart[\'total_weight\'] = $miniShop2->formatWeight($cart[\'total_weight\']);\\n\\nreturn $miniShop2->pdoTools->getChunk($tpl, $cart);","locked":0,"properties":"a:1:{s:3:\\"tpl\\";a:7:{s:4:\\"name\\";s:3:\\"tpl\\";s:4:\\"desc\\";s:12:\\"ms2_prop_tpl\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:14:\\"tpl.msMiniCart\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/snippets\\/snippet.ms_minicart.php","content":"\\/** @var modX $modx *\\/\\n\\/** @var array $scriptProperties *\\/\\n\\/** @var miniShop2 $miniShop2 *\\/\\n$miniShop2 = $modx->getService(\'miniShop2\');\\n$miniShop2->initialize($modx->context->key);\\n\\n$tpl = $modx->getOption(\'tpl\', $scriptProperties, \'tpl.msMiniCart\');\\n\\n$cart = $miniShop2->cart->status();\\n$cart[\'total_cost\'] = $miniShop2->formatPrice($cart[\'total_cost\']);\\n$cart[\'total_weight\'] = $miniShop2->formatWeight($cart[\'total_weight\']);\\n\\nreturn $miniShop2->pdoTools->getChunk($tpl, $cart);"}',
        'guid' => 'c703afb3dbb48be8dc417a7aeb284aec',
        'native_key' => 0,
        'signature' => 'd3a0cc4c8f03b8bfb94ec8dc0b1c6c2b',
      ),
      'a48d4fba6209f16921fd12d534bebbe2' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modSnippet',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"msGallery","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"\\/** @var modX $modx *\\/\\n\\/** @var array $scriptProperties *\\/\\n\\/** @var miniShop2 $miniShop2 *\\/\\n$miniShop2 = $modx->getService(\'miniShop2\');\\n$miniShop2->initialize($modx->context->key);\\n\\/** @var pdoFetch $pdoFetch *\\/\\n$pdoFetch = $modx->getService(\'pdoFetch\');\\n$pdoFetch->setConfig($scriptProperties);\\n$pdoFetch->addTime(\'pdoTools loaded.\');\\n\\n$extensionsDir = $modx->getOption(\'extensionsDir\', $scriptProperties, \'components\\/minishop2\\/img\\/mgr\\/extensions\\/\', true);\\n$limit = $modx->getOption(\'limit\', $scriptProperties, 0);\\n$tpl = $modx->getOption(\'tpl\', $scriptProperties, \'tpl.msGallery\');\\n\\n\\/** @var msProduct $product *\\/\\n$product = !empty($product) && $product != $modx->resource->id\\n    ? $modx->getObject(\'msProduct\', $product)\\n    : $modx->resource;\\nif (!$product || !($product instanceof msProduct)) {\\n    return \\"[msGallery] The resource with id = {$product->id} is not instance of msProduct.\\";\\n}\\n\\n$where = array(\\n    \'product_id\' => $product->id,\\n    \'parent\' => 0,\\n);\\nif (!empty($filetype)) {\\n    $where[\'type:IN\'] = array_map(\'trim\', explode(\',\', $filetype));\\n}\\nif (empty($showInactive)) {\\n    $where[\'active\'] = 1;\\n}\\n$select = array(\\n    \'msProductFile\' => \'*\',\\n);\\n\\n\\/\\/ Add user parameters\\nforeach (array(\'where\') as $v) {\\n    if (!empty($scriptProperties[$v])) {\\n        $tmp = $scriptProperties[$v];\\n        if (!is_array($tmp)) {\\n            $tmp = json_decode($tmp, true);\\n        }\\n        if (is_array($tmp)) {\\n            $$v = array_merge($$v, $tmp);\\n        }\\n    }\\n    unset($scriptProperties[$v]);\\n}\\n$pdoFetch->addTime(\'Conditions prepared\');\\n\\n$default = array(\\n    \'class\' => \'msProductFile\',\\n    \'where\' => $where,\\n    \'select\' => $select,\\n    \'limit\' => $limit,\\n    \'sortby\' => \'rank\',\\n    \'sortdir\' => \'ASC\',\\n    \'fastMode\' => false,\\n    \'return\' => \'data\',\\n    \'nestedChunkPrefix\' => \'minishop2_\',\\n);\\n\\/\\/ Merge all properties and run!\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties), false);\\n$rows = $pdoFetch->run();\\n\\n$pdoFetch->addTime(\'Fetching thumbnails\');\\n\\n$resolution = array();\\n\\/** @var msProductData $data *\\/\\nif ($data = $product->getOne(\'Data\')) {\\n    if ($data->initializeMediaSource()) {\\n        $properties = $data->mediaSource->getProperties();\\n        if (isset($properties[\'thumbnails\'][\'value\'])) {\\n            $fileTypes = json_decode($properties[\'thumbnails\'][\'value\'], true);\\n            foreach ($fileTypes as $k => $v) {\\n                if (!is_numeric($k)) {\\n                    $resolution[] = $k;\\n                } elseif (!empty($v[\'name\'])) {\\n                    $resolution[] = $v[\'name\'];\\n                } else {\\n                    $resolution[] = @$v[\'w\'] . \'x\' . @$v[\'h\'];\\n                }\\n            }\\n        }\\n    }\\n}\\n\\n\\/\\/ Processing rows\\n$files = array();\\nforeach ($rows as $row) {\\n    if (isset($row[\'type\']) && $row[\'type\'] == \'image\') {\\n        $c = $modx->newQuery(\'msProductFile\', array(\'parent\' => $row[\'id\']));\\n        $c->select(\'product_id,url\');\\n        $tstart = microtime(true);\\n        if ($c->prepare() && $c->stmt->execute()) {\\n            $modx->queryTime += microtime(true) - $tstart;\\n            $modx->executedQueries++;\\n            while ($tmp = $c->stmt->fetch(PDO::FETCH_ASSOC)) {\\n                if (preg_match(\\"#\\/{$tmp[\'product_id\']}\\/(.*?)\\/#\\", $tmp[\'url\'], $size)) {\\n                    $row[$size[1]] = $tmp[\'url\'];\\n                }\\n            }\\n        }\\n    } elseif (isset($row[\'type\'])) {\\n        $row[\'thumbnail\'] =\\n        $row[\'url\'] = file_exists(MODX_ASSETS_PATH . $extensionsDir . $row[\'type\'] . \'.png\')\\n            ? MODX_ASSETS_URL . $extensionsDir . $row[\'type\'] . \'.png\'\\n            : MODX_ASSETS_URL . $extensionsDir . \'other.png\';\\n        foreach ($resolution as $v) {\\n            $row[$v] = $row[\'thumbnail\'];\\n        }\\n    }\\n\\n    $files[] = $row;\\n}\\n\\n$output = $pdoFetch->getChunk($tpl, array(\\n    \'files\' => $files,\\n));\\n\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\n    $output .= \'<pre class=\\"msGalleryLog\\">\' . print_r($pdoFetch->getTime(), 1) . \'<\\/pre>\';\\n}\\n\\nif (!empty($toPlaceholder)) {\\n    $modx->setPlaceholder($toPlaceholder, $output);\\n} else {\\n    return $output;\\n}","locked":0,"properties":"a:10:{s:7:\\"product\\";a:7:{s:4:\\"name\\";s:7:\\"product\\";s:4:\\"desc\\";s:16:\\"ms2_prop_product\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:3:\\"tpl\\";a:7:{s:4:\\"name\\";s:3:\\"tpl\\";s:4:\\"desc\\";s:12:\\"ms2_prop_tpl\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:13:\\"tpl.msGallery\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"limit\\";a:7:{s:4:\\"name\\";s:5:\\"limit\\";s:4:\\"desc\\";s:14:\\"ms2_prop_limit\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:0;s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"offset\\";a:7:{s:4:\\"name\\";s:6:\\"offset\\";s:4:\\"desc\\";s:15:\\"ms2_prop_offset\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:0;s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"sortby\\";a:7:{s:4:\\"name\\";s:6:\\"sortby\\";s:4:\\"desc\\";s:15:\\"ms2_prop_sortby\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:4:\\"rank\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"sortdir\\";a:7:{s:4:\\"name\\";s:7:\\"sortdir\\";s:4:\\"desc\\";s:16:\\"ms2_prop_sortdir\\";s:4:\\"type\\";s:4:\\"list\\";s:7:\\"options\\";a:2:{i:0;a:2:{s:4:\\"text\\";s:3:\\"ASC\\";s:5:\\"value\\";s:3:\\"ASC\\";}i:1;a:2:{s:4:\\"text\\";s:4:\\"DESC\\";s:5:\\"value\\";s:4:\\"DESC\\";}}s:5:\\"value\\";s:3:\\"ASC\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"toPlaceholder\\";a:7:{s:4:\\"name\\";s:13:\\"toPlaceholder\\";s:4:\\"desc\\";s:22:\\"ms2_prop_toPlaceholder\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"showLog\\";a:7:{s:4:\\"name\\";s:7:\\"showLog\\";s:4:\\"desc\\";s:16:\\"ms2_prop_showLog\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"where\\";a:7:{s:4:\\"name\\";s:5:\\"where\\";s:4:\\"desc\\";s:14:\\"ms2_prop_where\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"filetype\\";a:7:{s:4:\\"name\\";s:8:\\"filetype\\";s:4:\\"desc\\";s:17:\\"ms2_prop_filetype\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/snippets\\/snippet.ms_gallery.php","content":"\\/** @var modX $modx *\\/\\n\\/** @var array $scriptProperties *\\/\\n\\/** @var miniShop2 $miniShop2 *\\/\\n$miniShop2 = $modx->getService(\'miniShop2\');\\n$miniShop2->initialize($modx->context->key);\\n\\/** @var pdoFetch $pdoFetch *\\/\\n$pdoFetch = $modx->getService(\'pdoFetch\');\\n$pdoFetch->setConfig($scriptProperties);\\n$pdoFetch->addTime(\'pdoTools loaded.\');\\n\\n$extensionsDir = $modx->getOption(\'extensionsDir\', $scriptProperties, \'components\\/minishop2\\/img\\/mgr\\/extensions\\/\', true);\\n$limit = $modx->getOption(\'limit\', $scriptProperties, 0);\\n$tpl = $modx->getOption(\'tpl\', $scriptProperties, \'tpl.msGallery\');\\n\\n\\/** @var msProduct $product *\\/\\n$product = !empty($product) && $product != $modx->resource->id\\n    ? $modx->getObject(\'msProduct\', $product)\\n    : $modx->resource;\\nif (!$product || !($product instanceof msProduct)) {\\n    return \\"[msGallery] The resource with id = {$product->id} is not instance of msProduct.\\";\\n}\\n\\n$where = array(\\n    \'product_id\' => $product->id,\\n    \'parent\' => 0,\\n);\\nif (!empty($filetype)) {\\n    $where[\'type:IN\'] = array_map(\'trim\', explode(\',\', $filetype));\\n}\\nif (empty($showInactive)) {\\n    $where[\'active\'] = 1;\\n}\\n$select = array(\\n    \'msProductFile\' => \'*\',\\n);\\n\\n\\/\\/ Add user parameters\\nforeach (array(\'where\') as $v) {\\n    if (!empty($scriptProperties[$v])) {\\n        $tmp = $scriptProperties[$v];\\n        if (!is_array($tmp)) {\\n            $tmp = json_decode($tmp, true);\\n        }\\n        if (is_array($tmp)) {\\n            $$v = array_merge($$v, $tmp);\\n        }\\n    }\\n    unset($scriptProperties[$v]);\\n}\\n$pdoFetch->addTime(\'Conditions prepared\');\\n\\n$default = array(\\n    \'class\' => \'msProductFile\',\\n    \'where\' => $where,\\n    \'select\' => $select,\\n    \'limit\' => $limit,\\n    \'sortby\' => \'rank\',\\n    \'sortdir\' => \'ASC\',\\n    \'fastMode\' => false,\\n    \'return\' => \'data\',\\n    \'nestedChunkPrefix\' => \'minishop2_\',\\n);\\n\\/\\/ Merge all properties and run!\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties), false);\\n$rows = $pdoFetch->run();\\n\\n$pdoFetch->addTime(\'Fetching thumbnails\');\\n\\n$resolution = array();\\n\\/** @var msProductData $data *\\/\\nif ($data = $product->getOne(\'Data\')) {\\n    if ($data->initializeMediaSource()) {\\n        $properties = $data->mediaSource->getProperties();\\n        if (isset($properties[\'thumbnails\'][\'value\'])) {\\n            $fileTypes = json_decode($properties[\'thumbnails\'][\'value\'], true);\\n            foreach ($fileTypes as $k => $v) {\\n                if (!is_numeric($k)) {\\n                    $resolution[] = $k;\\n                } elseif (!empty($v[\'name\'])) {\\n                    $resolution[] = $v[\'name\'];\\n                } else {\\n                    $resolution[] = @$v[\'w\'] . \'x\' . @$v[\'h\'];\\n                }\\n            }\\n        }\\n    }\\n}\\n\\n\\/\\/ Processing rows\\n$files = array();\\nforeach ($rows as $row) {\\n    if (isset($row[\'type\']) && $row[\'type\'] == \'image\') {\\n        $c = $modx->newQuery(\'msProductFile\', array(\'parent\' => $row[\'id\']));\\n        $c->select(\'product_id,url\');\\n        $tstart = microtime(true);\\n        if ($c->prepare() && $c->stmt->execute()) {\\n            $modx->queryTime += microtime(true) - $tstart;\\n            $modx->executedQueries++;\\n            while ($tmp = $c->stmt->fetch(PDO::FETCH_ASSOC)) {\\n                if (preg_match(\\"#\\/{$tmp[\'product_id\']}\\/(.*?)\\/#\\", $tmp[\'url\'], $size)) {\\n                    $row[$size[1]] = $tmp[\'url\'];\\n                }\\n            }\\n        }\\n    } elseif (isset($row[\'type\'])) {\\n        $row[\'thumbnail\'] =\\n        $row[\'url\'] = file_exists(MODX_ASSETS_PATH . $extensionsDir . $row[\'type\'] . \'.png\')\\n            ? MODX_ASSETS_URL . $extensionsDir . $row[\'type\'] . \'.png\'\\n            : MODX_ASSETS_URL . $extensionsDir . \'other.png\';\\n        foreach ($resolution as $v) {\\n            $row[$v] = $row[\'thumbnail\'];\\n        }\\n    }\\n\\n    $files[] = $row;\\n}\\n\\n$output = $pdoFetch->getChunk($tpl, array(\\n    \'files\' => $files,\\n));\\n\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\n    $output .= \'<pre class=\\"msGalleryLog\\">\' . print_r($pdoFetch->getTime(), 1) . \'<\\/pre>\';\\n}\\n\\nif (!empty($toPlaceholder)) {\\n    $modx->setPlaceholder($toPlaceholder, $output);\\n} else {\\n    return $output;\\n}"}',
        'guid' => '9b0965b80d22637bc2e8828f77cb5f9a',
        'native_key' => 0,
        'signature' => 'c6a37874a49cb132cd2c202e58e616da',
      ),
      '418749ce5fa1c065e3ff0e077e15909c' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modSnippet',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"msOptions","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"\\/** @var modX $modx *\\/\\n\\/** @var array $scriptProperties *\\/\\n$tpl = $modx->getOption(\'tpl\', $scriptProperties, \'tpl.msOptions\');\\nif (!empty($input) && empty($product)) {\\n    $product = $input;\\n}\\nif (!empty($name) && empty($options)) {\\n    $options = $name;\\n}\\n\\n$product = !empty($product) && $product != $modx->resource->id\\n    ? $modx->getObject(\'msProduct\', $product)\\n    : $modx->resource;\\nif (!($product instanceof msProduct)) {\\n    return \\"[msOptions] The resource with id = {$product->id} is not instance of msProduct.\\";\\n}\\n\\n$names = array_map(\'trim\', explode(\',\', $options));\\n$options = array();\\nforeach ($names as $name) {\\n    if (!empty($name) && $option = $product->get($name)) {\\n        if (!empty($option[0])) {\\n            $options[$name] = $option;\\n        }\\n    }\\n}\\n\\n\\/** @var pdoTools $pdoTools *\\/\\n$pdoTools = $modx->getService(\'pdoTools\');\\n\\nreturn $pdoTools->getChunk($tpl, array(\\n    \'id\' => $product->id,\\n    \'options\' => $options,\\n));","locked":0,"properties":"a:3:{s:7:\\"product\\";a:7:{s:4:\\"name\\";s:7:\\"product\\";s:4:\\"desc\\";s:16:\\"ms2_prop_product\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"options\\";a:7:{s:4:\\"name\\";s:7:\\"options\\";s:4:\\"desc\\";s:16:\\"ms2_prop_options\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:3:\\"tpl\\";a:7:{s:4:\\"name\\";s:3:\\"tpl\\";s:4:\\"desc\\";s:12:\\"ms2_prop_tpl\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:13:\\"tpl.msOptions\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/snippets\\/snippet.ms_options.php","content":"\\/** @var modX $modx *\\/\\n\\/** @var array $scriptProperties *\\/\\n$tpl = $modx->getOption(\'tpl\', $scriptProperties, \'tpl.msOptions\');\\nif (!empty($input) && empty($product)) {\\n    $product = $input;\\n}\\nif (!empty($name) && empty($options)) {\\n    $options = $name;\\n}\\n\\n$product = !empty($product) && $product != $modx->resource->id\\n    ? $modx->getObject(\'msProduct\', $product)\\n    : $modx->resource;\\nif (!($product instanceof msProduct)) {\\n    return \\"[msOptions] The resource with id = {$product->id} is not instance of msProduct.\\";\\n}\\n\\n$names = array_map(\'trim\', explode(\',\', $options));\\n$options = array();\\nforeach ($names as $name) {\\n    if (!empty($name) && $option = $product->get($name)) {\\n        if (!empty($option[0])) {\\n            $options[$name] = $option;\\n        }\\n    }\\n}\\n\\n\\/** @var pdoTools $pdoTools *\\/\\n$pdoTools = $modx->getService(\'pdoTools\');\\n\\nreturn $pdoTools->getChunk($tpl, array(\\n    \'id\' => $product->id,\\n    \'options\' => $options,\\n));"}',
        'guid' => 'ad30a89e66fee5445a0cff9297e8f672',
        'native_key' => 0,
        'signature' => 'de4f870948271fda79121e3a44fa8144',
      ),
      'ad03972b34d7406c4ba5fe403cf65c10' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modSnippet',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"msOrder","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"\\/** @var modX $modx *\\/\\n\\/** @var array $scriptProperties *\\/\\n\\/** @var miniShop2 $miniShop2 *\\/\\n$miniShop2 = $modx->getService(\'miniShop2\');\\n$miniShop2->initialize($modx->context->key);\\n\\/** @var pdoFetch $pdoFetch *\\/\\n$pdoFetch = $modx->getService(\'pdoFetch\');\\n$pdoFetch->setConfig($scriptProperties);\\n$pdoFetch->addTime(\'pdoTools loaded.\');\\n\\n$tpl = $modx->getOption(\'tpl\', $scriptProperties, \'tpl.msOrder\');\\n\\n\\/\\/ Do not show order form when displaying details of existing order\\nif (!empty($_GET[\'msorder\'])) {\\n    return \'\';\\n}\\n\\n$cart = $miniShop2->cart->get();\\n$order = $miniShop2->order->get();\\n$status = $miniShop2->cart->status();\\nif (empty($status[\'total_count\'])) {\\n    return \'\';\\n}\\n$cost = $miniShop2->order->getCost();\\n$order[\'cost\'] = $miniShop2->formatPrice($cost[\'data\'][\'cost\']);\\n\\n\\/\\/ We need only active methods\\n$where = array(\\n    \'msDelivery.active\' => true,\\n    \'msPayment.active\' => true,\\n);\\n\\n\\/\\/ Join payments to deliveries\\n$leftJoin = array(\\n    \'Payments\' => array(\\n        \'class\' => \'msDeliveryMember\',\\n    ),\\n    \'msPayment\' => array(\\n        \'class\' => \'msPayment\',\\n        \'on\' => \'Payments.payment_id = msPayment.id\',\\n    ),\\n);\\n\\n\\/\\/ Select columns\\n$select = array(\\n    \'msDelivery\' => $modx->getSelectColumns(\'msDelivery\', \'msDelivery\', \'delivery_\'),\\n    \'msPayment\' => $modx->getSelectColumns(\'msPayment\', \'msPayment\', \'payment_\'),\\n);\\n\\n\\/\\/ Add user parameters\\nforeach (array(\'where\', \'leftJoin\', \'select\') as $v) {\\n    if (!empty($scriptProperties[$v])) {\\n        $tmp = $scriptProperties[$v];\\n        if (!is_array($tmp)) {\\n            $tmp = json_decode($tmp, true);\\n        }\\n        if (is_array($tmp)) {\\n            $$v = array_merge($$v, $tmp);\\n        }\\n    }\\n    unset($scriptProperties[$v]);\\n}\\n$pdoFetch->addTime(\'Conditions prepared\');\\n\\n\\/\\/ Default parameters\\n$default = array(\\n    \'class\' => \'msDelivery\',\\n    \'where\' => $where,\\n    \'leftJoin\' => $leftJoin,\\n    \'select\' => $select,\\n    \'sortby\' => \'msDelivery.rank asc, msPayment.rank\',\\n    \'sortdir\' => \'asc\',\\n    \'limit\' => 0,\\n    \'return\' => \'data\',\\n    \'nestedChunkPrefix\' => \'minishop2_\',\\n);\\n\\/\\/ Merge all properties and run!\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties), false);\\n$rows = $pdoFetch->run();\\n\\n$deliveries = $payments = array();\\nforeach ($rows as $row) {\\n    $delivery = array();\\n    $payment = array();\\n    foreach ($row as $key => $value) {\\n        if (strpos($key, \'delivery_\') === 0) {\\n            $delivery[substr($key, 9)] = $value;\\n        } else {\\n            $payment[substr($key, 8)] = $value;\\n        }\\n    }\\n\\n    if (!isset($deliveries[$delivery[\'id\']])) {\\n        $delivery[\'payments\'] = array();\\n        $deliveries[$delivery[\'id\']] = $delivery;\\n    }\\n    if (!empty($payment[\'id\'])) {\\n        $deliveries[$delivery[\'id\']][\'payments\'][] = (int)$payment[\'id\'];\\n        if (!isset($payments[$payment[\'id\']])) {\\n            $payments[$payment[\'id\']] = $payment;\\n        }\\n    }\\n}\\n\\n$form = array();\\n\\/\\/ Get user data\\n$profile = array();\\nif ($modx->user->isAuthenticated($modx->context->key)) {\\n    $profile = array_merge($modx->user->Profile->toArray(), $modx->user->toArray());\\n}\\n$fields = array(\\n    \'receiver\' => \'fullname\',\\n    \'phone\' => \'phone\',\\n    \'email\' => \'email\',\\n    \'comment\' => \'extended[comment]\',\\n    \'index\' => \'zip\',\\n    \'country\' => \'country\',\\n    \'region\' => \'state\',\\n    \'city\' => \'city\',\\n    \'street\' => \'address\',\\n    \'building\' => \'extended[building]\',\\n    \'room\' => \'extended[room]\',\\n);\\n\\/\\/ Apply custom fields\\nif (!empty($userFields)) {\\n    if (!is_array($userFields)) {\\n        $userFields = json_decode($userFields, true);\\n    }\\n    if (is_array($userFields)) {\\n        $fields = array_merge($fields, $userFields);\\n    }\\n}\\n\\/\\/ Set user fields\\nforeach ($fields as $key => $value) {\\n    if (!empty($profile) && !empty($value)) {\\n        if (strpos($value, \'extended\') !== false) {\\n            $tmp = substr($value, 9, -1);\\n            $value = !empty($profile[\'extended\'][$tmp])\\n                ? $profile[\'extended\'][$tmp]\\n                : \'\';\\n        } else {\\n            $value = $profile[$value];\\n        }\\n        $response = $miniShop2->order->add($key, $value);\\n        if ($response[\'success\'] && !empty($response[\'data\'][$key])) {\\n            $form[$key] = $response[\'data\'][$key];\\n        }\\n    }\\n    if (empty($form[$key]) && !empty($order[$key])) {\\n        $form[$key] = $order[$key];\\n        unset($order[$key]);\\n    }\\n}\\n\\n\\/\\/ Check for errors\\n$errors = array();\\nif (!empty($_POST)) {\\n    $response = $miniShop2->order->getDeliveryRequiresFields();\\n    $requires = $response[\'data\'][\'requires\'];\\n\\n    foreach ($_POST as $field => $val) {\\n        $validated = $miniShop2->order->validate($field, $val);\\n        if ((in_array($field, $requires) && empty($validated))) {\\n            $errors[] = $field;\\n        }\\n    }\\n}\\n\\n$output = $pdoFetch->getChunk($tpl, array(\\n    \'order\' => $order,\\n    \'form\' => $form,\\n    \'deliveries\' => $deliveries,\\n    \'payments\' => $payments,\\n    \'errors\' => $errors,\\n));\\n\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\n    $output .= \'<pre class=\\"msOrderLog\\">\' . print_r($pdoFetch->getTime(), true) . \'<\\/pre>\';\\n}\\n\\nreturn $output;","locked":0,"properties":"a:3:{s:3:\\"tpl\\";a:7:{s:4:\\"name\\";s:3:\\"tpl\\";s:4:\\"desc\\";s:12:\\"ms2_prop_tpl\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:11:\\"tpl.msOrder\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"userFields\\";a:7:{s:4:\\"name\\";s:10:\\"userFields\\";s:4:\\"desc\\";s:19:\\"ms2_prop_userFields\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"showLog\\";a:7:{s:4:\\"name\\";s:7:\\"showLog\\";s:4:\\"desc\\";s:16:\\"ms2_prop_showLog\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/snippets\\/snippet.ms_order.php","content":"\\/** @var modX $modx *\\/\\n\\/** @var array $scriptProperties *\\/\\n\\/** @var miniShop2 $miniShop2 *\\/\\n$miniShop2 = $modx->getService(\'miniShop2\');\\n$miniShop2->initialize($modx->context->key);\\n\\/** @var pdoFetch $pdoFetch *\\/\\n$pdoFetch = $modx->getService(\'pdoFetch\');\\n$pdoFetch->setConfig($scriptProperties);\\n$pdoFetch->addTime(\'pdoTools loaded.\');\\n\\n$tpl = $modx->getOption(\'tpl\', $scriptProperties, \'tpl.msOrder\');\\n\\n\\/\\/ Do not show order form when displaying details of existing order\\nif (!empty($_GET[\'msorder\'])) {\\n    return \'\';\\n}\\n\\n$cart = $miniShop2->cart->get();\\n$order = $miniShop2->order->get();\\n$status = $miniShop2->cart->status();\\nif (empty($status[\'total_count\'])) {\\n    return \'\';\\n}\\n$cost = $miniShop2->order->getCost();\\n$order[\'cost\'] = $miniShop2->formatPrice($cost[\'data\'][\'cost\']);\\n\\n\\/\\/ We need only active methods\\n$where = array(\\n    \'msDelivery.active\' => true,\\n    \'msPayment.active\' => true,\\n);\\n\\n\\/\\/ Join payments to deliveries\\n$leftJoin = array(\\n    \'Payments\' => array(\\n        \'class\' => \'msDeliveryMember\',\\n    ),\\n    \'msPayment\' => array(\\n        \'class\' => \'msPayment\',\\n        \'on\' => \'Payments.payment_id = msPayment.id\',\\n    ),\\n);\\n\\n\\/\\/ Select columns\\n$select = array(\\n    \'msDelivery\' => $modx->getSelectColumns(\'msDelivery\', \'msDelivery\', \'delivery_\'),\\n    \'msPayment\' => $modx->getSelectColumns(\'msPayment\', \'msPayment\', \'payment_\'),\\n);\\n\\n\\/\\/ Add user parameters\\nforeach (array(\'where\', \'leftJoin\', \'select\') as $v) {\\n    if (!empty($scriptProperties[$v])) {\\n        $tmp = $scriptProperties[$v];\\n        if (!is_array($tmp)) {\\n            $tmp = json_decode($tmp, true);\\n        }\\n        if (is_array($tmp)) {\\n            $$v = array_merge($$v, $tmp);\\n        }\\n    }\\n    unset($scriptProperties[$v]);\\n}\\n$pdoFetch->addTime(\'Conditions prepared\');\\n\\n\\/\\/ Default parameters\\n$default = array(\\n    \'class\' => \'msDelivery\',\\n    \'where\' => $where,\\n    \'leftJoin\' => $leftJoin,\\n    \'select\' => $select,\\n    \'sortby\' => \'msDelivery.rank asc, msPayment.rank\',\\n    \'sortdir\' => \'asc\',\\n    \'limit\' => 0,\\n    \'return\' => \'data\',\\n    \'nestedChunkPrefix\' => \'minishop2_\',\\n);\\n\\/\\/ Merge all properties and run!\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties), false);\\n$rows = $pdoFetch->run();\\n\\n$deliveries = $payments = array();\\nforeach ($rows as $row) {\\n    $delivery = array();\\n    $payment = array();\\n    foreach ($row as $key => $value) {\\n        if (strpos($key, \'delivery_\') === 0) {\\n            $delivery[substr($key, 9)] = $value;\\n        } else {\\n            $payment[substr($key, 8)] = $value;\\n        }\\n    }\\n\\n    if (!isset($deliveries[$delivery[\'id\']])) {\\n        $delivery[\'payments\'] = array();\\n        $deliveries[$delivery[\'id\']] = $delivery;\\n    }\\n    if (!empty($payment[\'id\'])) {\\n        $deliveries[$delivery[\'id\']][\'payments\'][] = (int)$payment[\'id\'];\\n        if (!isset($payments[$payment[\'id\']])) {\\n            $payments[$payment[\'id\']] = $payment;\\n        }\\n    }\\n}\\n\\n$form = array();\\n\\/\\/ Get user data\\n$profile = array();\\nif ($modx->user->isAuthenticated($modx->context->key)) {\\n    $profile = array_merge($modx->user->Profile->toArray(), $modx->user->toArray());\\n}\\n$fields = array(\\n    \'receiver\' => \'fullname\',\\n    \'phone\' => \'phone\',\\n    \'email\' => \'email\',\\n    \'comment\' => \'extended[comment]\',\\n    \'index\' => \'zip\',\\n    \'country\' => \'country\',\\n    \'region\' => \'state\',\\n    \'city\' => \'city\',\\n    \'street\' => \'address\',\\n    \'building\' => \'extended[building]\',\\n    \'room\' => \'extended[room]\',\\n);\\n\\/\\/ Apply custom fields\\nif (!empty($userFields)) {\\n    if (!is_array($userFields)) {\\n        $userFields = json_decode($userFields, true);\\n    }\\n    if (is_array($userFields)) {\\n        $fields = array_merge($fields, $userFields);\\n    }\\n}\\n\\/\\/ Set user fields\\nforeach ($fields as $key => $value) {\\n    if (!empty($profile) && !empty($value)) {\\n        if (strpos($value, \'extended\') !== false) {\\n            $tmp = substr($value, 9, -1);\\n            $value = !empty($profile[\'extended\'][$tmp])\\n                ? $profile[\'extended\'][$tmp]\\n                : \'\';\\n        } else {\\n            $value = $profile[$value];\\n        }\\n        $response = $miniShop2->order->add($key, $value);\\n        if ($response[\'success\'] && !empty($response[\'data\'][$key])) {\\n            $form[$key] = $response[\'data\'][$key];\\n        }\\n    }\\n    if (empty($form[$key]) && !empty($order[$key])) {\\n        $form[$key] = $order[$key];\\n        unset($order[$key]);\\n    }\\n}\\n\\n\\/\\/ Check for errors\\n$errors = array();\\nif (!empty($_POST)) {\\n    $response = $miniShop2->order->getDeliveryRequiresFields();\\n    $requires = $response[\'data\'][\'requires\'];\\n\\n    foreach ($_POST as $field => $val) {\\n        $validated = $miniShop2->order->validate($field, $val);\\n        if ((in_array($field, $requires) && empty($validated))) {\\n            $errors[] = $field;\\n        }\\n    }\\n}\\n\\n$output = $pdoFetch->getChunk($tpl, array(\\n    \'order\' => $order,\\n    \'form\' => $form,\\n    \'deliveries\' => $deliveries,\\n    \'payments\' => $payments,\\n    \'errors\' => $errors,\\n));\\n\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\n    $output .= \'<pre class=\\"msOrderLog\\">\' . print_r($pdoFetch->getTime(), true) . \'<\\/pre>\';\\n}\\n\\nreturn $output;"}',
        'guid' => 'bfb2174f8270967e58cf8199f89c0e46',
        'native_key' => 0,
        'signature' => '16908aec84c29f8126da1ad05ebb4f37',
      ),
      '8ee3b89d3b5aef25ca5481ba31b0c599' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modSnippet',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"msGetOrder","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"\\/** @var modX $modx *\\/\\n\\/** @var array $scriptProperties *\\/\\n\\/** @var miniShop2 $miniShop2 *\\/\\n$miniShop2 = $modx->getService(\'miniShop2\');\\n$miniShop2->initialize($modx->context->key);\\n\\/** @var pdoFetch $pdoFetch *\\/\\n$pdoFetch = $modx->getService(\'pdoFetch\');\\n$pdoFetch->setConfig($scriptProperties);\\n$pdoFetch->addTime(\'pdoTools loaded.\');\\n\\n$tpl = $modx->getOption(\'tpl\', $scriptProperties, \'tpl.msGetOrder\');\\n\\nif (empty($id) && !empty($_GET[\'msorder\'])) {\\n    $id = (int)$_GET[\'msorder\'];\\n}\\nif (empty($id)) {\\n    return;\\n}\\n\\/** @var msOrder $order *\\/\\nif (!$order = $modx->getObject(\'msOrder\', $id)) {\\n    return $modx->lexicon(\'ms2_err_order_nf\');\\n}\\n$canView = (!empty($_SESSION[\'minishop2\'][\'orders\']) && in_array($id, $_SESSION[\'minishop2\'][\'orders\'])) ||\\n    $order->get(\'user_id\') == $modx->user->id || $modx->user->hasSessionContext(\'mgr\') || !empty($scriptProperties[\'id\']);\\nif (!$canView) {\\n    return \'\';\\n}\\n\\n\\/\\/ Select ordered products\\n$where = array(\\n    \'msOrderProduct.order_id\' => $id,\\n);\\n\\n\\/\\/ Include products properties\\n$leftJoin = array(\\n    \'msProduct\' => array(\\n        \'class\' => \'msProduct\',\\n        \'on\' => \'msProduct.id = msOrderProduct.product_id\',\\n    ),\\n    \'Data\' => array(\\n        \'class\' => \'msProductData\',\\n        \'on\' => \'msProduct.id = Data.id\',\\n    ),\\n    \'Vendor\' => array(\\n        \'class\' => \'msVendor\',\\n        \'on\' => \'Data.vendor = Vendor.id\',\\n    ),\\n);\\n\\n\\/\\/ Select columns\\n$select = array(\\n    \'msProduct\' => !empty($includeContent)\\n        ? $modx->getSelectColumns(\'msProduct\', \'msProduct\')\\n        : $modx->getSelectColumns(\'msProduct\', \'msProduct\', \'\', array(\'content\'), true),\\n    \'Data\' => $modx->getSelectColumns(\'msProductData\', \'Data\', \'\', array(\'id\'),\\n            true) . \',`Data`.`price` as `original_price`\',\\n    \'Vendor\' => $modx->getSelectColumns(\'msVendor\', \'Vendor\', \'vendor.\', array(\'id\'), true),\\n    \'OrderProduct\' => $modx->getSelectColumns(\'msOrderProduct\', \'msOrderProduct\', \'\', array(\'id\'), true),\\n);\\n\\n\\/\\/ Include products thumbnails\\nif (!empty($includeThumbs)) {\\n    $thumbs = array_map(\'trim\', explode(\',\', $includeThumbs));\\n    if (!empty($thumbs[0])) {\\n        foreach ($thumbs as $thumb) {\\n            $leftJoin[$thumb] = array(\\n                \'class\' => \'msProductFile\',\\n                \'on\' => \\"`{$thumb}`.product_id = msProduct.id AND `{$thumb}`.parent != 0 AND `{$thumb}`.path LIKE \'%\\/{$thumb}\\/%\'\\",\\n            );\\n            $select[$thumb] = \\"`{$thumb}`.url as \'{$thumb}\'\\";\\n        }\\n        $pdoFetch->addTime(\'Included list of thumbnails: <b>\' . implode(\', \', $thumbs) . \'<\\/b>.\');\\n    }\\n}\\n\\n\\/\\/ Add user parameters\\nforeach (array(\'where\', \'leftJoin\', \'select\') as $v) {\\n    if (!empty($scriptProperties[$v])) {\\n        $tmp = $scriptProperties[$v];\\n        if (!is_array($tmp)) {\\n            $tmp = json_decode($tmp, true);\\n        }\\n        if (is_array($tmp)) {\\n            $$v = array_merge($$v, $tmp);\\n        }\\n    }\\n    unset($scriptProperties[$v]);\\n}\\n$pdoFetch->addTime(\'Conditions prepared\');\\n\\n\\/\\/ Tables for joining\\n$default = array(\\n    \'class\' => \'msOrderProduct\',\\n    \'where\' => $where,\\n    \'leftJoin\' => $leftJoin,\\n    \'select\' => $select,\\n    \'joinTVsTo\' => \'msProduct\',\\n    \'sortby\' => \'msOrderProduct.id\',\\n    \'sortdir\' => \'asc\',\\n    \'groupby\' => \'msOrderProduct.id\',\\n    \'fastMode\' => false,\\n    \'limit\' => 0,\\n    \'return\' => \'data\',\\n    \'decodeJSON\' => true,\\n    \'nestedChunkPrefix\' => \'minishop2_\',\\n);\\n\\/\\/ Merge all properties and run!\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties), true);\\n$rows = $pdoFetch->run();\\n\\n$products = array();\\n$cart_count = 0;\\nforeach ($rows as $product) {\\n    $product[\'old_price\'] = $miniShop2->formatPrice(\\n        $product[\'original_price\'] != $product[\'price\']\\n            ? $product[\'original_price\']\\n            : $product[\'old_price\']\\n    );\\n    $product[\'price\'] = $miniShop2->formatPrice($product[\'price\']);\\n    $product[\'cost\'] = $miniShop2->formatPrice($product[\'cost\']);\\n    $product[\'weight\'] = $miniShop2->formatWeight($product[\'weight\']);\\n\\n    $product[\'id\'] = (int)$product[\'id\'];\\n    if (empty($product[\'name\'])) {\\n        $product[\'name\'] = $product[\'pagetitle\'];\\n    } else {\\n        $product[\'pagetitle\'] = $product[\'name\'];\\n    }\\n\\n    \\/\\/ Additional properties of product\\n    if (!empty($product[\'options\']) && is_array($product[\'options\'])) {\\n        foreach ($product[\'options\'] as $option => $value) {\\n            $product[\'option.\' . $option] = $value;\\n        }\\n    }\\n\\n    \\/\\/ Add option values\\n    $options = $modx->call(\'msProductData\', \'loadOptions\', array(&$modx, $product[\'id\']));\\n    $products[] = array_merge($product, $options);\\n\\n    \\/\\/ Count total\\n    $cart_count += $product[\'count\'];\\n}\\n\\n$total = array(\\n    \'cost\' => $miniShop2->formatPrice($order->get(\'cost\')),\\n    \'cart_cost\' => $miniShop2->formatPrice($order->get(\'cart_cost\')),\\n    \'delivery_cost\' => $miniShop2->formatPrice($order->get(\'delivery_cost\')),\\n    \'weight\' => $miniShop2->formatWeight($order->get(\'weight\')),\\n    \'cart_weight\' => $miniShop2->formatWeight($order->get(\'weight\')),\\n    \'cart_count\' => $cart_count,\\n);\\n\\n$output = $pdoFetch->getChunk($tpl, array_merge($scriptProperties, array(\\n    \'order\' => $order->toArray(),\\n    \'products\' => $products,\\n    \'user\' => ($tmp = $order->getOne(\'User\'))\\n        ? array_merge($tmp->getOne(\'Profile\')->toArray(), $tmp->toArray())\\n        : array(),\\n    \'address\' => ($tmp = $order->getOne(\'Address\'))\\n        ? $tmp->toArray()\\n        : array(),\\n    \'delivery\' => ($tmp = $order->getOne(\'Delivery\'))\\n        ? $tmp->toArray()\\n        : array(),\\n    \'payment\' => ($tmp = $order->getOne(\'Payment\'))\\n        ? $tmp->toArray()\\n        : array(),\\n    \'total\' => $total,\\n)));\\n\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\n    $output .= \'<pre class=\\"msGetOrderLog\\">\' . print_r($pdoFetch->getTime(), true) . \'<\\/pre>\';\\n}\\n\\nif (!empty($toPlaceholder)) {\\n    $modx->setPlaceholder($toPlaceholder, $output);\\n} else {\\n    return $output;\\n}","locked":0,"properties":"a:5:{s:3:\\"tpl\\";a:7:{s:4:\\"name\\";s:3:\\"tpl\\";s:4:\\"desc\\";s:12:\\"ms2_prop_tpl\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:14:\\"tpl.msGetOrder\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"includeTVs\\";a:7:{s:4:\\"name\\";s:10:\\"includeTVs\\";s:4:\\"desc\\";s:19:\\"ms2_prop_includeTVs\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"includeThumbs\\";a:7:{s:4:\\"name\\";s:13:\\"includeThumbs\\";s:4:\\"desc\\";s:22:\\"ms2_prop_includeThumbs\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"toPlaceholder\\";a:7:{s:4:\\"name\\";s:13:\\"toPlaceholder\\";s:4:\\"desc\\";s:22:\\"ms2_prop_toPlaceholder\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"showLog\\";a:7:{s:4:\\"name\\";s:7:\\"showLog\\";s:4:\\"desc\\";s:16:\\"ms2_prop_showLog\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/snippets\\/snippet.ms_get_order.php","content":"\\/** @var modX $modx *\\/\\n\\/** @var array $scriptProperties *\\/\\n\\/** @var miniShop2 $miniShop2 *\\/\\n$miniShop2 = $modx->getService(\'miniShop2\');\\n$miniShop2->initialize($modx->context->key);\\n\\/** @var pdoFetch $pdoFetch *\\/\\n$pdoFetch = $modx->getService(\'pdoFetch\');\\n$pdoFetch->setConfig($scriptProperties);\\n$pdoFetch->addTime(\'pdoTools loaded.\');\\n\\n$tpl = $modx->getOption(\'tpl\', $scriptProperties, \'tpl.msGetOrder\');\\n\\nif (empty($id) && !empty($_GET[\'msorder\'])) {\\n    $id = (int)$_GET[\'msorder\'];\\n}\\nif (empty($id)) {\\n    return;\\n}\\n\\/** @var msOrder $order *\\/\\nif (!$order = $modx->getObject(\'msOrder\', $id)) {\\n    return $modx->lexicon(\'ms2_err_order_nf\');\\n}\\n$canView = (!empty($_SESSION[\'minishop2\'][\'orders\']) && in_array($id, $_SESSION[\'minishop2\'][\'orders\'])) ||\\n    $order->get(\'user_id\') == $modx->user->id || $modx->user->hasSessionContext(\'mgr\') || !empty($scriptProperties[\'id\']);\\nif (!$canView) {\\n    return \'\';\\n}\\n\\n\\/\\/ Select ordered products\\n$where = array(\\n    \'msOrderProduct.order_id\' => $id,\\n);\\n\\n\\/\\/ Include products properties\\n$leftJoin = array(\\n    \'msProduct\' => array(\\n        \'class\' => \'msProduct\',\\n        \'on\' => \'msProduct.id = msOrderProduct.product_id\',\\n    ),\\n    \'Data\' => array(\\n        \'class\' => \'msProductData\',\\n        \'on\' => \'msProduct.id = Data.id\',\\n    ),\\n    \'Vendor\' => array(\\n        \'class\' => \'msVendor\',\\n        \'on\' => \'Data.vendor = Vendor.id\',\\n    ),\\n);\\n\\n\\/\\/ Select columns\\n$select = array(\\n    \'msProduct\' => !empty($includeContent)\\n        ? $modx->getSelectColumns(\'msProduct\', \'msProduct\')\\n        : $modx->getSelectColumns(\'msProduct\', \'msProduct\', \'\', array(\'content\'), true),\\n    \'Data\' => $modx->getSelectColumns(\'msProductData\', \'Data\', \'\', array(\'id\'),\\n            true) . \',`Data`.`price` as `original_price`\',\\n    \'Vendor\' => $modx->getSelectColumns(\'msVendor\', \'Vendor\', \'vendor.\', array(\'id\'), true),\\n    \'OrderProduct\' => $modx->getSelectColumns(\'msOrderProduct\', \'msOrderProduct\', \'\', array(\'id\'), true),\\n);\\n\\n\\/\\/ Include products thumbnails\\nif (!empty($includeThumbs)) {\\n    $thumbs = array_map(\'trim\', explode(\',\', $includeThumbs));\\n    if (!empty($thumbs[0])) {\\n        foreach ($thumbs as $thumb) {\\n            $leftJoin[$thumb] = array(\\n                \'class\' => \'msProductFile\',\\n                \'on\' => \\"`{$thumb}`.product_id = msProduct.id AND `{$thumb}`.parent != 0 AND `{$thumb}`.path LIKE \'%\\/{$thumb}\\/%\'\\",\\n            );\\n            $select[$thumb] = \\"`{$thumb}`.url as \'{$thumb}\'\\";\\n        }\\n        $pdoFetch->addTime(\'Included list of thumbnails: <b>\' . implode(\', \', $thumbs) . \'<\\/b>.\');\\n    }\\n}\\n\\n\\/\\/ Add user parameters\\nforeach (array(\'where\', \'leftJoin\', \'select\') as $v) {\\n    if (!empty($scriptProperties[$v])) {\\n        $tmp = $scriptProperties[$v];\\n        if (!is_array($tmp)) {\\n            $tmp = json_decode($tmp, true);\\n        }\\n        if (is_array($tmp)) {\\n            $$v = array_merge($$v, $tmp);\\n        }\\n    }\\n    unset($scriptProperties[$v]);\\n}\\n$pdoFetch->addTime(\'Conditions prepared\');\\n\\n\\/\\/ Tables for joining\\n$default = array(\\n    \'class\' => \'msOrderProduct\',\\n    \'where\' => $where,\\n    \'leftJoin\' => $leftJoin,\\n    \'select\' => $select,\\n    \'joinTVsTo\' => \'msProduct\',\\n    \'sortby\' => \'msOrderProduct.id\',\\n    \'sortdir\' => \'asc\',\\n    \'groupby\' => \'msOrderProduct.id\',\\n    \'fastMode\' => false,\\n    \'limit\' => 0,\\n    \'return\' => \'data\',\\n    \'decodeJSON\' => true,\\n    \'nestedChunkPrefix\' => \'minishop2_\',\\n);\\n\\/\\/ Merge all properties and run!\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties), true);\\n$rows = $pdoFetch->run();\\n\\n$products = array();\\n$cart_count = 0;\\nforeach ($rows as $product) {\\n    $product[\'old_price\'] = $miniShop2->formatPrice(\\n        $product[\'original_price\'] != $product[\'price\']\\n            ? $product[\'original_price\']\\n            : $product[\'old_price\']\\n    );\\n    $product[\'price\'] = $miniShop2->formatPrice($product[\'price\']);\\n    $product[\'cost\'] = $miniShop2->formatPrice($product[\'cost\']);\\n    $product[\'weight\'] = $miniShop2->formatWeight($product[\'weight\']);\\n\\n    $product[\'id\'] = (int)$product[\'id\'];\\n    if (empty($product[\'name\'])) {\\n        $product[\'name\'] = $product[\'pagetitle\'];\\n    } else {\\n        $product[\'pagetitle\'] = $product[\'name\'];\\n    }\\n\\n    \\/\\/ Additional properties of product\\n    if (!empty($product[\'options\']) && is_array($product[\'options\'])) {\\n        foreach ($product[\'options\'] as $option => $value) {\\n            $product[\'option.\' . $option] = $value;\\n        }\\n    }\\n\\n    \\/\\/ Add option values\\n    $options = $modx->call(\'msProductData\', \'loadOptions\', array(&$modx, $product[\'id\']));\\n    $products[] = array_merge($product, $options);\\n\\n    \\/\\/ Count total\\n    $cart_count += $product[\'count\'];\\n}\\n\\n$total = array(\\n    \'cost\' => $miniShop2->formatPrice($order->get(\'cost\')),\\n    \'cart_cost\' => $miniShop2->formatPrice($order->get(\'cart_cost\')),\\n    \'delivery_cost\' => $miniShop2->formatPrice($order->get(\'delivery_cost\')),\\n    \'weight\' => $miniShop2->formatWeight($order->get(\'weight\')),\\n    \'cart_weight\' => $miniShop2->formatWeight($order->get(\'weight\')),\\n    \'cart_count\' => $cart_count,\\n);\\n\\n$output = $pdoFetch->getChunk($tpl, array_merge($scriptProperties, array(\\n    \'order\' => $order->toArray(),\\n    \'products\' => $products,\\n    \'user\' => ($tmp = $order->getOne(\'User\'))\\n        ? array_merge($tmp->getOne(\'Profile\')->toArray(), $tmp->toArray())\\n        : array(),\\n    \'address\' => ($tmp = $order->getOne(\'Address\'))\\n        ? $tmp->toArray()\\n        : array(),\\n    \'delivery\' => ($tmp = $order->getOne(\'Delivery\'))\\n        ? $tmp->toArray()\\n        : array(),\\n    \'payment\' => ($tmp = $order->getOne(\'Payment\'))\\n        ? $tmp->toArray()\\n        : array(),\\n    \'total\' => $total,\\n)));\\n\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\n    $output .= \'<pre class=\\"msGetOrderLog\\">\' . print_r($pdoFetch->getTime(), true) . \'<\\/pre>\';\\n}\\n\\nif (!empty($toPlaceholder)) {\\n    $modx->setPlaceholder($toPlaceholder, $output);\\n} else {\\n    return $output;\\n}"}',
        'guid' => '56ffea7688a3ba237e92f1dbfaae85d9',
        'native_key' => 0,
        'signature' => '1dbefae7f5e83cc17a045e2e01176491',
      ),
      '96b4e309f54623e8714cf6d16e610ef6' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modSnippet',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"msProductOptions","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"\\/** @var modX $modx *\\/\\n\\/** @var array $scriptProperties *\\/\\n\\n$tpl = $modx->getOption(\'tpl\', $scriptProperties, \'tpl.msOptions\');\\nif (!empty($input) && empty($product)) {\\n    $product = $input;\\n}\\n\\n$product = !empty($product) && $product != $modx->resource->id\\n    ? $modx->getObject(\'msProduct\', $product)\\n    : $modx->resource;\\nif (!($product instanceof msProduct)) {\\n    return \\"[msProductOptions] The resource with id = {$product->id} is not instance of msProduct.\\";\\n}\\n\\n$ignoreOptions = array_map(\'trim\', explode(\',\', $modx->getOption(\'ignoreOptions\', $scriptProperties, \'\')));\\n$onlyOptions = array_map(\'trim\', explode(\',\', $modx->getOption(\'onlyOptions\', $scriptProperties, \'\')));\\n$groups = !empty($groups)\\n    ? array_map(\'trim\', explode(\',\', $groups))\\n    : array();\\n\\/** @var msProductData $data *\\/\\nif ($data = $product->getOne(\'Data\')) {\\n    $optionKeys = $data->getOptionKeys();\\n}\\nif (empty($optionKeys)) {\\n    return \'\';\\n}\\n$productData = $product->loadOptions();\\n\\n$options = array();\\nforeach ($optionKeys as $key) {\\n    \\/\\/ Filter by key\\n    if (!empty($onlyOptions) && $onlyOptions[0] != \'\' && !in_array($key, $onlyOptions)) {\\n        continue;\\n    } elseif (in_array($key, $ignoreOptions)) {\\n        continue;\\n    }\\n    $option = array();\\n    foreach ($productData as $dataKey => $dataValue) {\\n        $dataKey = explode(\'.\', $dataKey);\\n        if ($dataKey[0] == $key && (count($dataKey) > 1)) {\\n            $option[$dataKey[1]] = $dataValue;\\n        }\\n    }\\n    $option[\'value\'] = $product->get($key);\\n\\n    \\/\\/ Filter by groups\\n    $skip = !empty($groups) && !in_array($option[\'category\'], $groups) && !in_array($option[\'category_name\'], $groups);\\n    if ($skip || empty($option[\'value\'])) {\\n        continue;\\n    }\\n    $options[$key] = $option;\\n}\\n\\n\\/** @var pdoTools $pdoTools *\\/\\n$pdoTools = $modx->getService(\'pdoTools\');\\n\\nreturn $pdoTools->getChunk($tpl, array(\\n    \'options\' => $options,\\n));","locked":0,"properties":"a:5:{s:7:\\"product\\";a:7:{s:4:\\"name\\";s:7:\\"product\\";s:4:\\"desc\\";s:16:\\"ms2_prop_product\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:3:\\"tpl\\";a:7:{s:4:\\"name\\";s:3:\\"tpl\\";s:4:\\"desc\\";s:12:\\"ms2_prop_tpl\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:20:\\"tpl.msProductOptions\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"ignoreOptions\\";a:7:{s:4:\\"name\\";s:13:\\"ignoreOptions\\";s:4:\\"desc\\";s:22:\\"ms2_prop_ignoreOptions\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"onlyOptions\\";a:7:{s:4:\\"name\\";s:11:\\"onlyOptions\\";s:4:\\"desc\\";s:20:\\"ms2_prop_onlyOptions\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"groups\\";a:7:{s:4:\\"name\\";s:6:\\"groups\\";s:4:\\"desc\\";s:15:\\"ms2_prop_groups\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/snippets\\/snippet.ms_product_options.php","content":"\\/** @var modX $modx *\\/\\n\\/** @var array $scriptProperties *\\/\\n\\n$tpl = $modx->getOption(\'tpl\', $scriptProperties, \'tpl.msOptions\');\\nif (!empty($input) && empty($product)) {\\n    $product = $input;\\n}\\n\\n$product = !empty($product) && $product != $modx->resource->id\\n    ? $modx->getObject(\'msProduct\', $product)\\n    : $modx->resource;\\nif (!($product instanceof msProduct)) {\\n    return \\"[msProductOptions] The resource with id = {$product->id} is not instance of msProduct.\\";\\n}\\n\\n$ignoreOptions = array_map(\'trim\', explode(\',\', $modx->getOption(\'ignoreOptions\', $scriptProperties, \'\')));\\n$onlyOptions = array_map(\'trim\', explode(\',\', $modx->getOption(\'onlyOptions\', $scriptProperties, \'\')));\\n$groups = !empty($groups)\\n    ? array_map(\'trim\', explode(\',\', $groups))\\n    : array();\\n\\/** @var msProductData $data *\\/\\nif ($data = $product->getOne(\'Data\')) {\\n    $optionKeys = $data->getOptionKeys();\\n}\\nif (empty($optionKeys)) {\\n    return \'\';\\n}\\n$productData = $product->loadOptions();\\n\\n$options = array();\\nforeach ($optionKeys as $key) {\\n    \\/\\/ Filter by key\\n    if (!empty($onlyOptions) && $onlyOptions[0] != \'\' && !in_array($key, $onlyOptions)) {\\n        continue;\\n    } elseif (in_array($key, $ignoreOptions)) {\\n        continue;\\n    }\\n    $option = array();\\n    foreach ($productData as $dataKey => $dataValue) {\\n        $dataKey = explode(\'.\', $dataKey);\\n        if ($dataKey[0] == $key && (count($dataKey) > 1)) {\\n            $option[$dataKey[1]] = $dataValue;\\n        }\\n    }\\n    $option[\'value\'] = $product->get($key);\\n\\n    \\/\\/ Filter by groups\\n    $skip = !empty($groups) && !in_array($option[\'category\'], $groups) && !in_array($option[\'category_name\'], $groups);\\n    if ($skip || empty($option[\'value\'])) {\\n        continue;\\n    }\\n    $options[$key] = $option;\\n}\\n\\n\\/** @var pdoTools $pdoTools *\\/\\n$pdoTools = $modx->getService(\'pdoTools\');\\n\\nreturn $pdoTools->getChunk($tpl, array(\\n    \'options\' => $options,\\n));"}',
        'guid' => 'd527463044f7903adafa860a74aabcad',
        'native_key' => 0,
        'signature' => 'cd959d42833ad7f082af9a0277a507ab',
      ),
    ),
    'Plugins' => 
    array (
      '540278b84a2bff1faeaf9f26f8a1e456' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modPlugin',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"miniShop2","description":"","editor_type":0,"category":0,"cache_type":0,"plugincode":"\\/** @var modX $modx *\\/\\nswitch ($modx->event->name) {\\n\\n    case \'OnMODXInit\':\\n        \\/\\/ Load extensions\\n        \\/** @var miniShop2 $miniShop2 *\\/\\n        if ($miniShop2 = $modx->getService(\'miniShop2\')) {\\n            $miniShop2->loadMap();\\n        }\\n        break;\\n\\n    case \'OnHandleRequest\':\\n        \\/\\/ Handle ajax requests\\n        $isAjax = !empty($_SERVER[\'HTTP_X_REQUESTED_WITH\']) && $_SERVER[\'HTTP_X_REQUESTED_WITH\'] == \'XMLHttpRequest\';\\n        if (empty($_REQUEST[\'ms2_action\']) || !$isAjax) {\\n            return;\\n        }\\n        \\/** @var miniShop2 $miniShop2 *\\/\\n        if ($miniShop2 = $modx->getService(\'miniShop2\')) {\\n            $response = $miniShop2->handleRequest($_REQUEST[\'ms2_action\'], @$_POST);\\n            @session_write_close();\\n            exit($response);\\n        }\\n        break;\\n\\n    case \'OnLoadWebDocument\':\\n        \\/\\/ Handle non-ajax requests\\n        if (!empty($_REQUEST[\'ms2_action\'])) {\\n            if ($miniShop2 = $modx->getService(\'miniShop2\')) {\\n                $miniShop2->handleRequest($_REQUEST[\'ms2_action\'], @$_POST);\\n            }\\n        }\\n        \\/\\/ Set product fields as [[*resource]] tags\\n        if ($modx->resource->get(\'class_key\') == \'msProduct\') {\\n            if ($dataMeta = $modx->getFieldMeta(\'msProductData\')) {\\n                unset($dataMeta[\'id\']);\\n                $modx->resource->_fieldMeta = array_merge(\\n                    $modx->resource->_fieldMeta,\\n                    $dataMeta\\n                );\\n            }\\n        }\\n        break;\\n\\n    case \'OnWebPageInit\':\\n        \\/\\/ Set referrer cookie\\n        \\/** @var msCustomerProfile $profile *\\/\\n        $referrerVar = $modx->getOption(\'ms2_referrer_code_var\', null, \'msfrom\', true);\\n        $cookieVar = $modx->getOption(\'ms2_referrer_cookie_var\', null, \'msreferrer\', true);\\n        $cookieTime = $modx->getOption(\'ms2_referrer_time\', null, 86400 * 365, true);\\n\\n        if (!$modx->user->isAuthenticated() && !empty($_REQUEST[$referrerVar])) {\\n            $code = trim($_REQUEST[$referrerVar]);\\n            if ($profile = $modx->getObject(\'msCustomerProfile\', array(\'referrer_code\' => $code))) {\\n                $referrer = $profile->get(\'id\');\\n                setcookie($cookieVar, $referrer, time() + $cookieTime);\\n            }\\n        }\\n        break;\\n\\n    case \'OnUserSave\':\\n        \\/\\/ Save referrer id\\n        if ($mode == modSystemEvent::MODE_NEW) {\\n            \\/** @var modUser $user *\\/\\n            $cookieVar = $modx->getOption(\'ms2_referrer_cookie_var\', null, \'msreferrer\', true);\\n            $cookieTime = $modx->getOption(\'ms2_referrer_time\', null, 86400 * 365, true);\\n            if ($modx->context->key != \'mgr\' && !empty($_COOKIE[$cookieVar])) {\\n                if ($profile = $modx->getObject(\'msCustomerProfile\', $user->get(\'id\'))) {\\n                    if (!$profile->get(\'referrer_id\') && $_COOKIE[$cookieVar] != $user->get(\'id\')) {\\n                        $profile->set(\'referrer_id\', (int)$_COOKIE[$cookieVar]);\\n                        $profile->save();\\n                    }\\n                }\\n                setcookie($cookieVar, \'\', time() - $cookieTime);\\n            }\\n        }\\n        break;\\n\\n    case \'msOnChangeOrderStatus\':\\n        \\/\\/ Update customer stat\\n        if (empty($status) || $status != 2) {\\n            return;\\n        }\\n\\n        \\/** @var modUser $user *\\/\\n        if ($user = $order->getOne(\'User\')) {\\n            $q = $modx->newQuery(\'msOrder\', array(\'type\' => 0));\\n            $q->innerJoin(\'modUser\', \'modUser\', array(\'modUser.id = msOrder.user_id\'));\\n            $q->innerJoin(\'msOrderLog\', \'msOrderLog\', array(\\n                \'msOrderLog.order_id = msOrder.id\',\\n                \'msOrderLog.action\' => \'status\',\\n                \'msOrderLog.entry\' => $status,\\n            ));\\n            $q->where(array(\'msOrder.user_id\' => $user->get(\'id\')));\\n            $q->groupby(\'msOrder.user_id\');\\n            $q->select(\'SUM(msOrder.cost)\');\\n            if ($q->prepare() && $q->stmt->execute()) {\\n                $spent = $q->stmt->fetchColumn();\\n                \\/** @var msCustomerProfile $profile *\\/\\n                if ($profile = $modx->getObject(\'msCustomerProfile\', $user->get(\'id\'))) {\\n                    $profile->set(\'spent\', $spent);\\n                    $profile->save();\\n                }\\n            }\\n        }\\n        break;\\n}","locked":0,"properties":null,"disabled":0,"moduleguid":"","static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/plugins\\/plugin.minishop2.php","content":"\\/** @var modX $modx *\\/\\nswitch ($modx->event->name) {\\n\\n    case \'OnMODXInit\':\\n        \\/\\/ Load extensions\\n        \\/** @var miniShop2 $miniShop2 *\\/\\n        if ($miniShop2 = $modx->getService(\'miniShop2\')) {\\n            $miniShop2->loadMap();\\n        }\\n        break;\\n\\n    case \'OnHandleRequest\':\\n        \\/\\/ Handle ajax requests\\n        $isAjax = !empty($_SERVER[\'HTTP_X_REQUESTED_WITH\']) && $_SERVER[\'HTTP_X_REQUESTED_WITH\'] == \'XMLHttpRequest\';\\n        if (empty($_REQUEST[\'ms2_action\']) || !$isAjax) {\\n            return;\\n        }\\n        \\/** @var miniShop2 $miniShop2 *\\/\\n        if ($miniShop2 = $modx->getService(\'miniShop2\')) {\\n            $response = $miniShop2->handleRequest($_REQUEST[\'ms2_action\'], @$_POST);\\n            @session_write_close();\\n            exit($response);\\n        }\\n        break;\\n\\n    case \'OnLoadWebDocument\':\\n        \\/\\/ Handle non-ajax requests\\n        if (!empty($_REQUEST[\'ms2_action\'])) {\\n            if ($miniShop2 = $modx->getService(\'miniShop2\')) {\\n                $miniShop2->handleRequest($_REQUEST[\'ms2_action\'], @$_POST);\\n            }\\n        }\\n        \\/\\/ Set product fields as [[*resource]] tags\\n        if ($modx->resource->get(\'class_key\') == \'msProduct\') {\\n            if ($dataMeta = $modx->getFieldMeta(\'msProductData\')) {\\n                unset($dataMeta[\'id\']);\\n                $modx->resource->_fieldMeta = array_merge(\\n                    $modx->resource->_fieldMeta,\\n                    $dataMeta\\n                );\\n            }\\n        }\\n        break;\\n\\n    case \'OnWebPageInit\':\\n        \\/\\/ Set referrer cookie\\n        \\/** @var msCustomerProfile $profile *\\/\\n        $referrerVar = $modx->getOption(\'ms2_referrer_code_var\', null, \'msfrom\', true);\\n        $cookieVar = $modx->getOption(\'ms2_referrer_cookie_var\', null, \'msreferrer\', true);\\n        $cookieTime = $modx->getOption(\'ms2_referrer_time\', null, 86400 * 365, true);\\n\\n        if (!$modx->user->isAuthenticated() && !empty($_REQUEST[$referrerVar])) {\\n            $code = trim($_REQUEST[$referrerVar]);\\n            if ($profile = $modx->getObject(\'msCustomerProfile\', array(\'referrer_code\' => $code))) {\\n                $referrer = $profile->get(\'id\');\\n                setcookie($cookieVar, $referrer, time() + $cookieTime);\\n            }\\n        }\\n        break;\\n\\n    case \'OnUserSave\':\\n        \\/\\/ Save referrer id\\n        if ($mode == modSystemEvent::MODE_NEW) {\\n            \\/** @var modUser $user *\\/\\n            $cookieVar = $modx->getOption(\'ms2_referrer_cookie_var\', null, \'msreferrer\', true);\\n            $cookieTime = $modx->getOption(\'ms2_referrer_time\', null, 86400 * 365, true);\\n            if ($modx->context->key != \'mgr\' && !empty($_COOKIE[$cookieVar])) {\\n                if ($profile = $modx->getObject(\'msCustomerProfile\', $user->get(\'id\'))) {\\n                    if (!$profile->get(\'referrer_id\') && $_COOKIE[$cookieVar] != $user->get(\'id\')) {\\n                        $profile->set(\'referrer_id\', (int)$_COOKIE[$cookieVar]);\\n                        $profile->save();\\n                    }\\n                }\\n                setcookie($cookieVar, \'\', time() - $cookieTime);\\n            }\\n        }\\n        break;\\n\\n    case \'msOnChangeOrderStatus\':\\n        \\/\\/ Update customer stat\\n        if (empty($status) || $status != 2) {\\n            return;\\n        }\\n\\n        \\/** @var modUser $user *\\/\\n        if ($user = $order->getOne(\'User\')) {\\n            $q = $modx->newQuery(\'msOrder\', array(\'type\' => 0));\\n            $q->innerJoin(\'modUser\', \'modUser\', array(\'modUser.id = msOrder.user_id\'));\\n            $q->innerJoin(\'msOrderLog\', \'msOrderLog\', array(\\n                \'msOrderLog.order_id = msOrder.id\',\\n                \'msOrderLog.action\' => \'status\',\\n                \'msOrderLog.entry\' => $status,\\n            ));\\n            $q->where(array(\'msOrder.user_id\' => $user->get(\'id\')));\\n            $q->groupby(\'msOrder.user_id\');\\n            $q->select(\'SUM(msOrder.cost)\');\\n            if ($q->prepare() && $q->stmt->execute()) {\\n                $spent = $q->stmt->fetchColumn();\\n                \\/** @var msCustomerProfile $profile *\\/\\n                if ($profile = $modx->getObject(\'msCustomerProfile\', $user->get(\'id\'))) {\\n                    $profile->set(\'spent\', $spent);\\n                    $profile->save();\\n                }\\n            }\\n        }\\n        break;\\n}"}',
        'guid' => '6cbb3e42226fc9716e227922389539e4',
        'native_key' => 0,
        'signature' => '320efe101c04e5eb2bb69b66c44821c6',
        'related_objects' => 
        array (
          'PluginEvents' => 
          array (
            'b06dec5fdb1f0885ff26e35d8f003c2c' => 
            array (
              'preserve_keys' => true,
              'update_object' => true,
              'unique_key' => 
              array (
                0 => 'pluginid',
                1 => 'event',
              ),
              'class' => 'modPluginEvent',
              'object' => '{"pluginid":0,"event":"OnMODXInit","priority":0,"propertyset":0}',
              'guid' => '7576cc24c155387b7ad92d4e0819b8c4',
              'native_key' => 
              array (
                0 => 0,
                1 => 'OnMODXInit',
              ),
              'signature' => '7adc267ad0fe612a0da145c6bcbeadeb',
            ),
            'b46ee43fb03b7c0bc88e4f614349f38f' => 
            array (
              'preserve_keys' => true,
              'update_object' => true,
              'unique_key' => 
              array (
                0 => 'pluginid',
                1 => 'event',
              ),
              'class' => 'modPluginEvent',
              'object' => '{"pluginid":0,"event":"OnHandleRequest","priority":0,"propertyset":0}',
              'guid' => '3cee8ff142572ed19a201a1c3fe48e2a',
              'native_key' => 
              array (
                0 => 0,
                1 => 'OnHandleRequest',
              ),
              'signature' => '739de9d228efece93ec904a5b5c47033',
            ),
            '4da4904024ac6833f43788359882b651' => 
            array (
              'preserve_keys' => true,
              'update_object' => true,
              'unique_key' => 
              array (
                0 => 'pluginid',
                1 => 'event',
              ),
              'class' => 'modPluginEvent',
              'object' => '{"pluginid":0,"event":"OnLoadWebDocument","priority":0,"propertyset":0}',
              'guid' => 'b2b7e15e8a490d71340b2c3cd96befd7',
              'native_key' => 
              array (
                0 => 0,
                1 => 'OnLoadWebDocument',
              ),
              'signature' => '9668197a68cf6bd16603049751a3a243',
            ),
            'b2a41c9760ffbb4a635140d8db047ee7' => 
            array (
              'preserve_keys' => true,
              'update_object' => true,
              'unique_key' => 
              array (
                0 => 'pluginid',
                1 => 'event',
              ),
              'class' => 'modPluginEvent',
              'object' => '{"pluginid":0,"event":"OnWebPageInit","priority":0,"propertyset":0}',
              'guid' => '6470d852dfecc0bdee544db0e39dcaa9',
              'native_key' => 
              array (
                0 => 0,
                1 => 'OnWebPageInit',
              ),
              'signature' => 'ff997872fe1a7acbcb9c753efefaa57a',
            ),
            'c8039bd3c4c887a66cb42e5eb3fc3279' => 
            array (
              'preserve_keys' => true,
              'update_object' => true,
              'unique_key' => 
              array (
                0 => 'pluginid',
                1 => 'event',
              ),
              'class' => 'modPluginEvent',
              'object' => '{"pluginid":0,"event":"OnUserSave","priority":0,"propertyset":0}',
              'guid' => 'fbdcc13090085a654fc7623bebc0edb2',
              'native_key' => 
              array (
                0 => 0,
                1 => 'OnUserSave',
              ),
              'signature' => '1da10f0f2c6289cd5eb6c22a42295af4',
            ),
            '6547075259c6ad561537448557bd3020' => 
            array (
              'preserve_keys' => true,
              'update_object' => true,
              'unique_key' => 
              array (
                0 => 'pluginid',
                1 => 'event',
              ),
              'class' => 'modPluginEvent',
              'object' => '{"pluginid":0,"event":"msOnChangeOrderStatus","priority":0,"propertyset":0}',
              'guid' => 'e8e1c5ce68890b9545ad49d08106c9c6',
              'native_key' => 
              array (
                0 => 0,
                1 => 'msOnChangeOrderStatus',
              ),
              'signature' => '36ab2b926daef54a85e2b2bfdd31798b',
            ),
          ),
        ),
      ),
    ),
  ),
  'related_object_attributes' => 
  array (
    'Snippets' => 
    array (
      'preserve_keys' => false,
      'update_object' => true,
      'unique_key' => 'name',
    ),
    'Chunks' => 
    array (
      'preserve_keys' => false,
      'update_object' => false,
      'unique_key' => 'name',
    ),
    'Plugins' => 
    array (
      'preserve_keys' => false,
      'update_object' => true,
      'unique_key' => 'name',
    ),
    'PluginEvents' => 
    array (
      'preserve_keys' => true,
      'update_object' => true,
      'unique_key' => 
      array (
        0 => 'pluginid',
        1 => 'event',
      ),
    ),
  ),
  'namespace' => 'minishop2',
  'resolve' => 
  array (
    0 => 
    array (
      'type' => 'file',
      'body' => '{"source":"minishop2-2.4.8-pl2\\/modCategory\\/827862d8c48d56a0118e2b3845efc223\\/0\\/","target":"return MODX_ASSETS_PATH . \'components\\/\';","name":"minishop2"}',
    ),
    1 => 
    array (
      'type' => 'file',
      'body' => '{"source":"minishop2-2.4.8-pl2\\/modCategory\\/827862d8c48d56a0118e2b3845efc223\\/1\\/","target":"return MODX_CORE_PATH . \'components\\/\';","name":"minishop2"}',
    ),
    2 => 
    array (
      'type' => 'php',
      'body' => '{"source":"minishop2-2.4.8-pl2\\/modCategory\\/827862d8c48d56a0118e2b3845efc223.resolve.extension.resolver","type":"php","name":"resolve.extension"}',
    ),
    3 => 
    array (
      'type' => 'php',
      'body' => '{"source":"minishop2-2.4.8-pl2\\/modCategory\\/827862d8c48d56a0118e2b3845efc223.resolve.tables.resolver","type":"php","name":"resolve.tables"}',
    ),
    4 => 
    array (
      'type' => 'php',
      'body' => '{"source":"minishop2-2.4.8-pl2\\/modCategory\\/827862d8c48d56a0118e2b3845efc223.resolve.policy.resolver","type":"php","name":"resolve.policy"}',
    ),
    5 => 
    array (
      'type' => 'php',
      'body' => '{"source":"minishop2-2.4.8-pl2\\/modCategory\\/827862d8c48d56a0118e2b3845efc223.resolve.sources.resolver","type":"php","name":"resolve.sources"}',
    ),
    6 => 
    array (
      'type' => 'php',
      'body' => '{"source":"minishop2-2.4.8-pl2\\/modCategory\\/827862d8c48d56a0118e2b3845efc223.resolve.settings.resolver","type":"php","name":"resolve.settings"}',
    ),
    7 => 
    array (
      'type' => 'php',
      'body' => '{"source":"minishop2-2.4.8-pl2\\/modCategory\\/827862d8c48d56a0118e2b3845efc223.resolve.chunks.resolver","type":"php","name":"resolve.chunks"}',
    ),
    8 => 
    array (
      'type' => 'php',
      'body' => '{"source":"minishop2-2.4.8-pl2\\/modCategory\\/827862d8c48d56a0118e2b3845efc223.resolve.setup.resolver","type":"php","name":"resolve.setup"}',
    ),
    9 => 
    array (
      'type' => 'php',
      'body' => '{"source":"minishop2-2.4.8-pl2\\/modCategory\\/827862d8c48d56a0118e2b3845efc223.resolve.upgrade.resolver","type":"php","name":"resolve.upgrade"}',
    ),
  ),
  'validate' => NULL,
  'vehicle_package' => 'transport',
  'vehicle_class' => 'xPDOObjectVehicle',
  'guid' => '90be28b110e783878d0de141e7bf2e06',
  'package' => 'modx',
  'class' => 'modCategory',
  'signature' => '827862d8c48d56a0118e2b3845efc223',
  'native_key' => 1,
  'object' => '{"id":1,"parent":0,"category":"miniShop2","rank":0}',
);